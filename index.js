const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/footer-DBT35hI1.js","assets/footer-BUhT8NfC.css"])))=>i.map(i=>d[i]);
import{i as D,s as S,o as F}from"./assets/footer-DBT35hI1.js";import{i as C,d as Z}from"./assets/vendor-CIM6REQF.js";const K="modulepreload",ee=function(e){return"/tasty-treats/"+e},_={},te=function(t,a,n){let o=Promise.resolve();if(a&&a.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),c=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));o=Promise.allSettled(a.map(s=>{if(s=ee(s),s in _)return;_[s]=!0;const m=s.endsWith(".css"),y=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${s}"]${y}`))return;const d=document.createElement("link");if(d.rel=m?"stylesheet":K,m||(d.as="script"),d.crossOrigin="",d.href=s,c&&d.setAttribute("nonce",c),document.head.appendChild(d),m)return new Promise((l,h)=>{d.addEventListener("load",l),d.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${s}`)))})}))}function r(i){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=i,window.dispatchEvent(c),!c.defaultPrevented)throw i}return o.then(i=>{for(const c of i||[])c.status==="rejected"&&r(c.reason);return t().catch(r)})},ae="/tasty-treats/assets/1-rDOwHOuF.webp",ne="/tasty-treats/assets/2-4skkltV-.webp",oe="/tasty-treats/assets/3-D0-ZMNjm.webp",re="/tasty-treats/assets/4-BmSdx1zx.webp",se="/tasty-treats/assets/5-BCo80kwS.webp",ie="/tasty-treats/assets/5-BCo80kwS.webp",ce="/tasty-treats/assets/7-CqGGUQ5C.webp",le="/tasty-treats/assets/8-GawR9MF4.webp",de="/tasty-treats/assets/8-GawR9MF4.webp",ge=[ae,ne,oe,re,se,ie,ce,le,de];document.addEventListener("DOMContentLoaded",function(){setTimeout(()=>{te(()=>import("./assets/footer-DBT35hI1.js").then(e=>e.a),__vite__mapDeps([0,1])).then(()=>{const e=document.querySelector(".slider"),t=document.querySelectorAll(".slide"),a=document.querySelectorAll(".lazy-image"),n=document.querySelector(".slider-indicators");let o=0,r=100;(()=>{const l=new IntersectionObserver((h,E)=>{h.forEach(M=>{if(M.isIntersecting){const I=M.target;I.src=ge[Number(I.dataset.src)-1],I.classList.remove("lazy-image"),E.unobserve(I)}})},{threshold:.1});a.forEach(h=>l.observe(h))})(),t.forEach((l,h)=>{const E=document.createElement("div");E.classList.add("indicator"),E.addEventListener("click",()=>y(h)),n.appendChild(E)});const c=document.querySelectorAll(".indicator");function s(){e.style.transform=`translateX(-${o*r}%)`,m()}function m(){c.forEach((l,h)=>{h===o?l.classList.add("active"):l.classList.remove("active")})}function y(l){o=l,s()}function d(){const l=e.offsetWidth;window.innerWidth>=1280?r=602/l*100:window.innerWidth>=768&&window.innerWidth<945?r=l/1/l*100:r=100,s()}d(),s(),window.addEventListener("resize",d),setInterval(()=>{o=(o+1)%t.length,s()},5e3)}).catch(e=>{console.error("CSS yüklenirken bir hata oluştu:",e)})},100)});const ue="/tasty-treats/assets/nothing-BxBcHaW7.gif",A=document.getElementById("filter-form"),T=document.getElementById("time-options"),P=document.getElementById("area-options"),R=document.getElementById("ingredient-options"),me=document.getElementById("time-trigger-text"),pe=document.getElementById("area-trigger-text"),fe=document.getElementById("ingredient-trigger-text"),L=document.getElementById("search"),w=document.getElementById("cancel-btn"),he=document.getElementById("reset-filter-btn"),N=document.getElementById("loader"),$=document.querySelector(".pagination"),b=document.querySelector(".cards-list"),g=JSON.parse(localStorage.getItem("favArr"))||[];async function ye(){try{const t=await(await fetch("https://tasty-treats-backend.p.goit.global/api/recipes?limit=9")).json();return k(t.results),t.totalPages}catch(e){return C.error({title:"",message:"Sorry! An error occured while fetching recipes. Please try again!",position:"topRight"}),console.error("API verisi alınırken hata oluştu:",e),"hata"}}function k(e){const t=localStorage.getItem("favArr")?JSON.parse(localStorage.getItem("favArr")):[];b.innerHTML="",e.length===0?(b.innerHTML=`
    <div class="no-results-container loader-container">
      <p class="no-results-text">Sorry! No results were found that match your filters.</p>
      <img class="no-results" src="${ue}"></img>
    </div>`,$.classList.add("hidden")):($.classList.remove("hidden"),e.forEach(a=>{const n=Math.round(a.rating),o=5-n,r=`
      <li class="cards-listing" style="background-image: url(${a.preview});">
      <button class="heard-button add-to-fav" data-category="${a.category}" data-id="${a._id}" aria-label="like-btn">
         <svg class="svg-heard add-to-fav" data-id="${a._id}" width="22px" height="22px">
            <use class="add-to-fav svguse" href="${S}#${t.includes(a._id)?"icon-heart-filled":"icon-heart"}"></use>
        </svg></button>

      <div class="card-content-container">
         <div class="text-container">
            <h3 class="card-title">${a.title}</h3>
              <p class="specification-text">${a.description}</p>
          </div>

          <div class="card-rating-container">
              <div class="rating-container">
                  <p class="rating-text">${a.rating.toFixed(1)}</p>
                  <div class="star-container">
                    ${`<svg class="card-star-svg">
                    <use href="${S}#icon-star"></use>
                      </svg>`.repeat(n)}

                    ${`<svg class="card-star-svg">
                    <use href="${S}#icon-emptystar"></use>
                    </svg>`.repeat(o)}
                  </div>    
                </div>
              
            <button class="recipe-button" data-id="${a._id}">See recipe</button>
        </div>      
      </li>
    `;b.insertAdjacentHTML("beforeend",r)}),U())}function U(){document.querySelectorAll(".recipe-button").forEach(t=>{t.addEventListener("click",function(){const a=this.getAttribute("data-id");F(a)})})}function ve(e){console.log("favArr before e.target",g);const t=e.target.closest(".heard-button");let a=JSON.parse(localStorage.getItem("favArr"))||[];if(console.log("favArrNew",a),t){console.log("favArr after e.target",g);const n=t.dataset.id,o=t.querySelector(".svguse");g.includes(n)?(console.log("favArr before splice",g),g.splice(g.indexOf(n),1),o.setAttribute("href",`${S}#icon-heart`),console.log("favArr after splice",g)):(console.log("favArr before push",g),g.push(n),o.setAttribute("href",`${S}#icon-heart-filled`),console.log("favArr after push",g)),console.log("favArr before setting local storage",g),localStorage.setItem("favArr",JSON.stringify(g)),console.log("favArr after setting local storage",localStorage.getItem("favArr",JSON.stringify(g)))}}b.addEventListener("click",e=>ve(e));document.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>{ye().then(()=>{U(),D()})},100);const e=localStorage.getItem("favArr");e&&g.push(...JSON.parse(e))});const W=document.getElementById("orderForm"),be=document.querySelector(".order"),Le=document.querySelector(".close-button");be.addEventListener("click",e=>Ee());Le.addEventListener("click",e=>z());W.addEventListener("submit",e=>{z()});function Ee(){document.getElementById("popupOverlay").style.display="block",W.reset()}function z(){document.getElementById("popupOverlay").style.display="none"}const Se="https://tasty-treats-backend.p.goit.global/api/areas",we="https://tasty-treats-backend.p.goit.global/api/ingredients";async function Ie(){try{const e=await fetch(Se);if(!e.ok)throw new Error("Failed to fetch areas");const t=await e.json();j(t)}catch{j([{name:"Sorry no region to select"}])}}function j(e){e.forEach(t=>{const a=`<li data-area="${t.name}" data-name="area" class="option">${t.name}</li>`;P.insertAdjacentHTML("beforeend",a)})}async function $e(){try{const e=await fetch(we);if(!e.ok)throw new Error("Failed to fetch ingredients");const t=await e.json();H(t)}catch{H([{name:"Sorry no ingredients to select"}])}}function H(e){e.forEach(t=>{const a=`<li data-ingredient="${t._id}" data-name="ingredient" class="option">${t.name}</li>`;R.insertAdjacentHTML("beforeend",a)})}function ke(){for(let e=5;e<=120;e+=5){const t=`<li data-time="${e}" data-name="time" class="option">${e} min</li>`;T.insertAdjacentHTML("beforeend",t)}}function G(){localStorage.setItem("time",""),localStorage.setItem("area",""),localStorage.setItem("ingredient",""),localStorage.setItem("title",""),localStorage.setItem("totalPage",""),localStorage.setItem("category","")}document.addEventListener("DOMContentLoaded",()=>{Ie(),$e(),ke(),G()});let u="https://tasty-treats-backend.p.goit.global/api/recipes?category=&page=1&limit=9";async function x(e){try{b.innerHTML="",O();const t=await fetch(e);if(!t.ok)throw new Error("An error occurred while fetching recipes");const a=await t.json();localStorage.setItem("totalPage",a.totalPages?a.totalPages:1),v(1,"form-read"),k(a.results)}catch(t){C.error({title:"",message:"Sorry! An error occurred while fetching recipes please try again!",position:"topRight"}),console.log(t.message)}finally{q()}}function Ae(e,t){if(t.target.tagName!=="LI")return;const a=localStorage.getItem("category"),n=document.getElementById(`${e}-trigger-text`),o=document.getElementById(`${e}-options`),r=t.target.dataset[e];n.textContent=t.target.textContent,localStorage.setItem(`${e}`,r),u=u.includes(e)?u.replace(new RegExp(`${e}=[^&]*`),`${e}=${r}`):`${u}&${e}=${r}`,u=u.includes("category")?u.replace(/category=[^&]*/,`category=${a}`):`${u}&category=${a}`,o.classList.add("hidden-dropdown"),n.classList.add("trigger-active"),console.log(u),x(u)}const J=Z(function(){L.value!==""?w.classList.remove("hidden"):w.classList.add("hidden");const e=localStorage.getItem("category"),t=localStorage.getItem("time"),a=localStorage.getItem("area"),n=localStorage.getItem("ingredient"),o=L.value.trim();u=`https://tasty-treats-backend.p.goit.global/api/recipes?category=${e}&page=1&limit=9&time=${t}&area=${a}&ingredient=${n}&title=${o}`,localStorage.setItem("title",L.value?o:""),x(u)},300);function V(){u="https://tasty-treats-backend.p.goit.global/api/recipes?category=&page=1&limit=9",[me,pe,fe].forEach(t=>{t.textContent="Select",t.classList.remove("trigger-active")}),L.value="",document.querySelectorAll(".category-btn").forEach(t=>{t.style.color=""}),w.classList.add("hidden"),G(),x(u)}function Be(){L.value="",w.classList.add("hidden"),J()}function O(){N.classList.remove("hidden"),$.classList.add("hidden-pagination")}function q(){N.classList.add("hidden"),$.classList.remove("hidden-pagination")}function Q(){[T,P,R].forEach(e=>e.classList.add("hidden-dropdown"))}function Ce(e){A&&!A.contains(e.target)&&Q()}function Te(e){let t=e.target.id;switch((e.target.tagName==="svg"||e.target.tagName==="SPAN")&&(t=e.target.parentElement.id),t){case"time-trigger":T.classList.toggle("hidden-dropdown");break;case"area-trigger":P.classList.toggle("hidden-dropdown");break;case"ingredient-trigger":R.classList.toggle("hidden-dropdown");break;default:if(e.target.tagName==="LI"){const a=e.target.dataset.name;Ae(a,e)}else Q()}}A.addEventListener("click",e=>Te(e));L.addEventListener("input",J);w.addEventListener("click",Be);he.addEventListener("click",V);window.addEventListener("click",e=>Ce(e));const Pe=document.querySelector(".pagination"),Re=document.querySelectorAll(".page-number"),xe=document.getElementById("singleLeft"),Oe=document.getElementById("singleRight"),qe=document.getElementById("doubleLeft"),Me=document.getElementById("doubleRight");let p=1,f=1,X=null;async function _e(){f=await He(),X=f,Y()}async function je(e){b.innerHTML="",O();try{const t=await fetch(e);if(!t.ok)throw new Error("An error occurred while fetching recipes");const a=await t.json();k(a.results)}catch{C.error({title:"",message:"Sorry! An error occurred while fetching recipes please try again!",position:"topRight"})}finally{q()}}async function He(){try{return(await(await fetch("https://tasty-treats-backend.p.goit.global/api/recipes?limit=9")).json()).totalPages}catch(e){return console.error("API verisi alınırken hata oluştu:",e),1}}function Y(){let e=-1;p==f&&f!=1&&(e=-2),p!=f&&p==1&&(e=0),Re.forEach((t,a)=>{const n=p+e+a;t.textContent=n,t.classList.toggle("active-page",n==p),t.style.display=n>0&&n<=f?"inline-block":"none"}),xe.disabled=p==1,qe.disabled=p==1,Oe.disabled=p==f,Me.disabled=p==f}function v(e,t){f=localStorage.getItem("totalPage")?Number(localStorage.getItem("totalPage")):X,e>=1&&e<=f&&(p=e,Y()),t=="page-number"&&De(e)}function De(e){const t=localStorage.getItem("time"),a=localStorage.getItem("category")?localStorage.getItem("category"):"",n=localStorage.getItem("area"),o=localStorage.getItem("ingredient"),r=localStorage.getItem("title");je(`https://tasty-treats-backend.p.goit.global/api/recipes?category=${a}&page=${e}&limit=9&time=${t}&area=${n}&ingredient=${o}&title=${r}`)}Pe.addEventListener("click",e=>{e.target.classList.contains("page-number")?v(parseInt(e.target.textContent),"page-number"):e.target.id==="singleLeft"?v(p-1,"page-number"):e.target.id==="singleRight"?v(p+1,"page-number"):e.target.id==="doubleLeft"?v(1,"page-number"):e.target.id==="doubleRight"&&v(f,"page-number")});document.addEventListener("DOMContentLoaded",_e);const Fe=document.querySelector(".category-items-list"),Ne=document.querySelector(".categories-button");async function Ue(){const e="https://tasty-treats-backend.p.goit.global/api/categories";localStorage.setItem("category","");try{const n=(await(await fetch(e)).json()).map(o=>o.name);Ge(n),ze()}catch(t){console.log(t+"fetching categories")}}async function We(e){const t=localStorage.getItem("time"),a=localStorage.getItem("area"),n=localStorage.getItem("ingredient"),o=localStorage.getItem("title");console.log("boş",t,a,n);const r=`https://tasty-treats-backend.p.goit.global/api/recipes?category=${e}&page=1&limit=9&time=${t}&area=${a}&ingredient=${n}&title=${o}`;try{b.innerHTML="",O();const c=await(await fetch(r)).json();localStorage.setItem("totalPage",c.totalPages?c.totalPages:1),localStorage.setItem("category",e);const s=c.results;k(s)}catch(i){console.log(i+"fetching chosen category recipes")}finally{q(),v(1,"category-list")}}function ze(){const e=document.querySelectorAll(".category-btn");e.forEach(t=>{t.addEventListener("click",a=>{e.forEach(o=>{o.style.color=""}),a.target.style.color="var(--primary-color)";let n=a.target.innerText;localStorage.setItem("category",n),We(n)})})}function Ge(e){e.forEach(t=>{Fe.innerHTML+=`
            <li class="category-items"><button class="category-btn">${t}</button></li>
        `})}Ne.addEventListener("click",V);document.addEventListener("DOMContentLoaded",Ue);document.addEventListener("DOMContentLoaded",()=>{D(),Je()});async function Je(){try{const a=await(await fetch("https://tasty-treats-backend.p.goit.global/api/recipes/popular")).json(),n=document.querySelector("#popular-recipes-gallery");n.innerHTML="";const o=document.createDocumentFragment();a.forEach((r,i)=>{const c=document.createElement("li"),s=document.createElement("div");s.classList.add("recipe-container"),(i===2||i===3)&&s.classList.add("mobile-special");const m=document.createElement("img");m.src=r.preview||"default-image.jpg",m.alt=r.title||"Unknown Recipe",m.width=64,m.height=64,m.addEventListener("click",()=>{r._id?F(r._id):console.warn("Recipe ID is undefined!")});const y=document.createElement("div");y.classList.add("recipe-content");const d=document.createElement("h2");d.textContent=r.title||"Unknown Recipe",d.classList.add("recipe-content-title");const l=document.createElement("p");l.textContent=r.description||"No instructions provided",l.classList.add("recipe-content-instructions"),y.appendChild(d),y.appendChild(l),s.appendChild(m),s.appendChild(y),c.appendChild(s),o.appendChild(c)}),n.appendChild(o)}catch(e){console.error("Error fetching data:",e)}}const B=document.getElementById("scrollBtn");function Ve(){window.scrollY>300?B.style.display="block":B.style.display="none"}function Qe(e){e.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})}window.addEventListener("scroll",Ve);B.addEventListener("click",e=>Qe(e));
//# sourceMappingURL=index.js.map
