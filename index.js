import"./assets/styles-BXt5_OyY.js";import{i as R,d as N}from"./assets/vendor-BE0UidyL.js";const z=document.getElementById("filter-form");document.getElementById("time-trigger");document.getElementById("area-trigger");document.getElementById("ingredient-trigger");const $=document.getElementById("time-options"),B=document.getElementById("area-options"),M=document.getElementById("ingredient-options"),G=document.getElementById("time-trigger-text"),J=document.getElementById("area-trigger-text"),K=document.getElementById("ingredient-trigger-text"),V=document.getElementById("time-hidden-input"),Y=document.getElementById("area-hidden-input"),Q=document.getElementById("ingredient-hidden-input"),p=document.getElementById("search"),E=document.getElementById("cancel-btn"),W=document.getElementById("reset-filter-btn"),b=document.getElementById("loader");z.addEventListener("click",e=>{let t=e.target.id;switch((e.target.tagName==="svg"||e.target.tagName==="SPAN")&&(t=e.target.parentElement.id),t){case"time-trigger":$.classList.toggle("hidden-dropdown");break;case"area-trigger":B.classList.toggle("hidden-dropdown");break;case"ingredient-trigger":M.classList.toggle("hidden-dropdown");break}});const X="https://tasty-treats-backend.p.goit.global/api/areas",Z="https://tasty-treats-backend.p.goit.global/api/ingredients";async function ee(){try{const e=await fetch(X);if(!e.ok)throw new Error("Failed to fetch areas");const t=await e.json();T(t)}catch{T([{name:"Sorry no region to select"}])}}function T(e){e.forEach(t=>{const n=`<li data-area="${t.name}" class="option">${t.name}</li>`;B.insertAdjacentHTML("beforeend",n)})}async function te(){try{const e=await fetch(Z);if(!e.ok)throw new Error("Failed to fetch ingredients");const t=await e.json();x(t)}catch{x([{name:"Sorry no ingredients to select"}])}}function x(e){e.forEach(t=>{const n=`<li data-ingredient="${t._id}" class="option">${t.name}</li>`;M.insertAdjacentHTML("beforeend",n)})}function ne(){for(let e=5;e<=120;e+=5){const t=`<li data-time="${e}" class="option">${e} min</li>`;$.insertAdjacentHTML("beforeend",t)}}function H(){localStorage.setItem("time",""),localStorage.setItem("area",""),localStorage.setItem("ingredient",""),localStorage.setItem("totalPage","")}document.addEventListener("DOMContentLoaded",()=>{ee(),te(),ne(),H()});function oe(){const e=document.getElementById("recipeModal"),t=e.querySelector(".modal-close-button");t.onclick=w,window.onclick=function(n){n.target===e&&w()},document.addEventListener("keydown",function(n){n.key==="Escape"&&e.style.display==="block"&&w()})}async function ae(e){const t=document.getElementById("recipeModal"),n=t.querySelector(".modal-content");n.innerHTML="<p>Loading recipe details...</p>",t.style.display="block";try{const a=await(await fetch(`https://tasty-treats-backend.p.goit.global/api/recipes/${e}`)).json();console.log(a.youtube),n.innerHTML=`
        <div style="padding: 20px;">
        <button class="modal-close-button" onclick="closeModal()">&times;</button> 
        <div class= "modal-heading">
          <div style="flex: 1;">
            <iframe class="modal-iframe" src="https://www.youtube.com/embed/${new URL(a.youtube).searchParams.get("v")}" frameborder="0" allowfullscreen></iframe>
          </div>
        <div style="flex: 1;">
        <h2>${a.title}</h2>
        <p>Rating: ${a.rating}</p>
        <h3>Ingredients:</h3>
        <ul class="modal-recipe-ingredients">
          ${a.ingredients.map(s=>`<li class="modal-recipe-ingredients-item">${s.name}: ${s.measure}</li>`).join("")}
        </ul>
        </div>
        </div>
        <p>${a.instructions}</p>
        <div style="display: flex; gap: 20px; margin-top: 20px;">
          <button id="addToFavoriteButton">Add to Favorite</button>
          <button id="giveRatingButton">Give a Rating</button>
        </div>
        </div>
      `}catch(o){console.error("Error fetching recipe details:",o),n.innerHTML="<p>Error loading recipe details. Please try again.</p>"}}function w(){const e=document.getElementById("recipeModal");e.style.display="none"}const h=document.querySelector(".cards-list"),v=[];async function D(){try{const t=await(await fetch("https://tasty-treats-backend.p.goit.global/api/recipes?limit=9")).json();return I(t.results),t.totalPages}catch(e){return console.error("API verisi alınırken hata oluştu:",e),"hata"}}function I(e){h.innerHTML="",e.length===0&&(h.innerHTML=`<img class="no-results" src="https://media1.tenor.com/m/Cj9rNn9J6V4AAAAC/lost.gif"></img>
                                    <h1 class="no-results-text">Sorry! No results were found that match your filters.</h1>`),e.forEach(n=>{const o=Math.round(n.rating),a=5-o,s=`
      <li class="cards-listing" style="background-image: url(${n.preview});">
      <button class="heard-button add-to-fav" data-id="${n._id}" aria-label="like-btn">
         <svg class="svg-heard add-to-fav" data-id="${n._id}" width="22px" height="22px">
            <use class="add-to-fav svguse" href="./svg/sprite.svg#icon-heart"></use>
        </svg></button>

      <div class="card-content-container">
         <div class="text-container">
            <h3 class="card-title">${n.title}</h3>
              <p class="specification-text">${n.description}</p>
          </div>

          <div class="card-rating-container">
              <div class="rating-container">
                  <p class="rating-text">${n.rating.toFixed(1)}</p>
                  <div class="star-container">
                    ${`<svg class="card-star-svg">
                    <use href="./svg/sprite.svg#icon-star"></use>
                      </svg>`.repeat(o)}

                    ${`<svg class="card-star-svg">
                    <use href="./svg/sprite.svg#icon-emptystar"></use>
                    </svg>`.repeat(a)}
                  </div>    
                </div>
              
            <button class="recipe-button" data-id="${n._id}">See recipe</button>
        </div>      
      </li>
    `;h.insertAdjacentHTML("beforeend",s)}),P(),document.querySelectorAll(".recipe-button").forEach(n=>{n.addEventListener("click",function(){n.style.color="#000"})})}function P(){document.querySelectorAll(".recipe-button").forEach(t=>{t.addEventListener("click",function(){const n=this.getAttribute("data-id");ae(n)})})}function se(){localStorage.setItem("favArr",JSON.stringify(v))}h.addEventListener("click",e=>{const t=e.target.closest(".heard-button");if(t){const n=t.dataset.id,o=t.querySelector(".svguse");v.includes(n)?(v.splice(v.indexOf(n),1),o.setAttribute("href","./svg/sprite.svg#icon-heart")):(v.push(n),o.setAttribute("href","./svg/sprite.svg#icon-heart-filled")),se()}});document.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>{D().then(()=>{P(),oe()})},100);const e=localStorage.getItem("favArr");e&&v.push(...JSON.parse(e))});const ie=document.querySelector(".pagination"),re=document.querySelectorAll(".page-number"),ce=document.getElementById("singleLeft"),le=document.getElementById("singleRight"),de=document.getElementById("doubleLeft"),ge=document.getElementById("doubleRight");let r=1,c=1,j=null;async function ue(){c=await pe(),j=c,q()}async function me(e){h.innerHTML="",b.classList.remove("hidden");try{const t=await fetch(e);if(!t.ok)throw new Error("An error occurred while fetching recipes");const n=await t.json();I(n.results)}catch{R.error({title:"",message:"Sorry! An error occurred while fetching recipes please try again!",position:"topRight"})}finally{b.classList.add("hidden")}}async function pe(){try{return(await(await fetch("https://tasty-treats-backend.p.goit.global/api/recipes?limit=9")).json()).totalPages}catch(e){return console.error("API verisi alınırken hata oluştu:",e),1}}function q(){let e=-1;r==c&&c!=1&&(e=-2),r!=c&&r==1&&(e=0),re.forEach((t,n)=>{const o=r+e+n;t.textContent=o,t.classList.toggle("active-page",o==r),t.style.display=o>0&&o<=c?"inline-block":"none"}),ce.disabled=r==1,de.disabled=r==1,le.disabled=r==c,ge.disabled=r==c}function d(e,t){console.log("page : ",e),c=localStorage.getItem("totalPage")?Number(localStorage.getItem("totalPage")):j,console.log("total page : ",c),e>=1&&e<=c&&(r=e,q()),t=="page-number"&&he(e)}function he(e){const t=localStorage.getItem("time"),n=localStorage.getItem("category")?localStorage.getItem("category"):"",o=localStorage.getItem("area"),a=localStorage.getItem("ingredient");me(`https://tasty-treats-backend.p.goit.global/api/recipes?category=${n}&page=${e}&limit=9&time=${t}&area=${o}&ingredient=${a}`)}ie.addEventListener("click",e=>{e.target.classList.contains("page-number")?d(parseInt(e.target.textContent),"page-number"):e.target.id==="singleLeft"?d(r-1,"page-number"):e.target.id==="singleRight"?d(r+1,"page-number"):e.target.id==="doubleLeft"?d(1,"page-number"):e.target.id==="doubleRight"&&d(c,"page-number")});document.addEventListener("DOMContentLoaded",ue);const fe=document.querySelector(".category-items-list"),ye=document.querySelector(".categories-button");async function ve(){const e="https://tasty-treats-backend.p.goit.global/api/categories";localStorage.setItem("category","");try{const o=(await(await fetch(e)).json()).map(a=>a.name);Ee(o),Le()}catch(t){console.log(t+"fetching categories")}}async function be(e){const t=localStorage.getItem("time"),n=localStorage.getItem("area"),o=localStorage.getItem("ingredient");console.log("boş",t,n,o);const a=`https://tasty-treats-backend.p.goit.global/api/recipes?category=${e}&page=1&limit=9&time=${t}&area=${n}&ingredient=${o}`;try{h.innerHTML="",b.classList.remove("hidden");const g=await(await fetch(a)).json();localStorage.setItem("totalPage",g.totalPages),localStorage.setItem("category",e);const f=g.results;I(f),d(1)}catch(s){console.log(s+"fetching chosen category recipes")}finally{b.classList.add("hidden")}}function Le(){const e=document.querySelectorAll(".category-btn");e.forEach(t=>{t.addEventListener("click",n=>{e.forEach(a=>{a.style.color=""}),n.target.style.color="var(--primary-color)";let o=n.target.innerText;localStorage.setItem("category",o),be(o)})})}function Ee(e){e.forEach(t=>{fe.innerHTML+=`
            <li class="category-items"><button class="category-btn">${t}</button></li>
        `})}function Ie(){const e=document.querySelector(".cards-list");document.querySelectorAll(".category-btn").forEach(n=>{n.style.color=""}),e.innerHTML="",localStorage.setItem("category",""),D().then(n=>{localStorage.setItem("totalPage",n)}),d(1)}ye.addEventListener("click",Ie);document.addEventListener("DOMContentLoaded",ve);let i="https://tasty-treats-backend.p.goit.global/api/recipes?category=&page=1&limit=9";async function A(e){try{h.innerHTML="",b.classList.remove("hidden");const t=await fetch(e);if(!t.ok)throw new Error("An error occurred while fetching recipes");const n=await t.json();localStorage.setItem("totalPage",n.totalPages),d(1,"form-read"),I(n.results)}catch(t){R.error({title:"",message:"Sorry! An error occurred while fetching recipes please try again!",position:"topRight"}),console.log(t.message)}finally{b.classList.add("hidden")}}function C(e,t){if(t.target.tagName!=="LI")return;const n=localStorage.getItem("category"),o=document.getElementById(`${e}-trigger-text`),a=document.getElementById(`${e}-hidden-input`),s=document.getElementById(`${e}-options`);o.textContent=t.target.textContent,a.value=t.target.dataset[e],localStorage.setItem(`${e}`,a.value),i=i.includes(e)?i.replace(new RegExp(`${e}=[^&]*`),`${e}=${a.value}`):`${i}&${e}=${a.value}`,i=i.includes("category")?i.replace(/category=[^&]*/,`category=${n}`):`${i}&category=${n}`,s.classList.add("hidden-dropdown"),o.classList.add("trigger-active"),A(i)}const O=N(function(){p.value!==""?E.classList.remove("hidden"):E.classList.add("hidden"),i=i.includes("title")?i.replace(/title=[^&]*/,`title=${p.value}`):`${i}&title=${p.value}`,localStorage.setItem("title",p.value),A(i)},300);function Se(){i="https://tasty-treats-backend.p.goit.global/api/recipes?category=&page=1&limit=9",[G,J,K].forEach(e=>{e.textContent="Select",e.classList.remove("trigger-active")}),[V,Y,Q,p].forEach(e=>e.value=""),E.classList.add("hidden"),H(),A(i)}function we(){O(),p.value="",E.classList.add("hidden")}$.addEventListener("click",e=>C("time",e));B.addEventListener("click",e=>C("area",e));M.addEventListener("click",e=>C("ingredient",e));p.addEventListener("input",O);E.addEventListener("click",we);W.addEventListener("click",Se);document.addEventListener("DOMContentLoaded",()=>{ke()});async function ke(){try{const n=await(await fetch("https://tasty-treats-backend.p.goit.global/api/recipes/popular")).json(),o=document.querySelector("#popular-recipes-gallery");o.innerHTML="";const a=document.createDocumentFragment();n.forEach((s,g)=>{const f=document.createElement("li"),u=document.createElement("div");u.classList.add("recipe-container"),(g===2||g===3)&&u.classList.add("mobile-special");const L=document.createElement("img");L.src=s.preview||"default-image.jpg",L.alt=s.title||"Unknown Recipe";const y=document.createElement("div");y.classList.add("recipe-content");const l=document.createElement("h2");l.textContent=s.title||"Unknown Recipe",l.classList.add("recipe-content-title");const m=document.createElement("p");m.textContent=s.description||"No instructions provided",m.classList.add("recipe-content-instructions"),y.appendChild(l),y.appendChild(m),u.appendChild(L),u.appendChild(y),f.appendChild(u),a.appendChild(f)}),o.appendChild(a)}catch(e){console.error("Error fetching data:",e)}}const k=document.getElementById("scrollBtn");window.addEventListener("scroll",function(){window.scrollY>300?k.style.display="block":k.style.display="none"});k.addEventListener("click",function(e){e.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})});document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".footer-list"),t=document.getElementById("myModal"),n=document.getElementById("openModalBtn"),o=document.getElementsByClassName("close")[0],a={name:"Mete CİVELEK",role:"Team Leader, Developer",imgSrc:"https://via.placeholder.com/50",github:"https://github.com/metlandus"},s={name:"Şubat YÜCEL",role:"Team Leader, Developer",imgSrc:"https://via.placeholder.com/50",github:"https://github.com/subatyucel"},g={name:"Deniz Sofia ULUTAŞ",role:"Scrum Master, Developer",imgSrc:"https://via.placeholder.com/50",github:"https://github.com/sofia11244"},f={name:"Onur AKARSU",role:"Developer",imgSrc:"https://via.placeholder.com/50",github:"https://github.com/RiveTroy"},u={name:"Pınar ÜNLÜ",role:"Developer",imgSrc:"https://via.placeholder.com/50",github:"https://github.com/pinarunlu"},L={name:"Mehmet ARDIÇ",role:"Developer",imgSrc:"https://via.placeholder.com/50",github:"https://github.com/ArdicMehmet"},y={name:"Murat ÇOLAK",role:"Developer",imgSrc:"https://via.placeholder.com/50",github:"https://github.com/zipkaniar"},l=({name:m,role:F,imgSrc:U,github:_})=>{const S=document.createElement("li");return S.classList.add("footer-list-item"),S.innerHTML=`
    <img class="footer-list-item-img" src="${U}" alt="">
    
    <div class="footer-list-item-info">    
        <h2 class="footer-list-item-name">${m}</h2>
        <p class="footer-list-item-text">${F}</p>
        <div class="footer-list-item-links">
        <a class="footer-list-item-link" href="${_}" target="_blank">
            <svg class="icon-github-logo" width="20" height="20">
                <use xlink:href="./svg/github-icon.svg#icon-github-logo"></use>
            </svg>
            GitHub 
        </a>
        </div>
    </div>
     `,S};e.append(l(a),l(s),l(g),l(f),l(u),l(L),l(y)),n.onclick=function(){t.style.display="block"},o.onclick=function(){t.style.display="none"},window.onclick=function(m){m.target===t&&(t.style.display="none")}});
//# sourceMappingURL=index.js.map
