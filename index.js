import{i as F,s as S,o as _}from"./assets/footer-mascot-D25PUpP0.js";import{i as A,d as Z}from"./assets/vendor-BE0UidyL.js";const K="/tasty-treats/assets/1-rDOwHOuF.webp",tt="/tasty-treats/assets/2-4skkltV-.webp",et="/tasty-treats/assets/3-D0-ZMNjm.webp",at="/tasty-treats/assets/4-BmSdx1zx.webp",nt="/tasty-treats/assets/5-BCo80kwS.webp",ot="/tasty-treats/assets/5-BCo80kwS.webp",st="/tasty-treats/assets/7-CqGGUQ5C.webp",rt="/tasty-treats/assets/8-GawR9MF4.webp",it="/tasty-treats/assets/8-GawR9MF4.webp",ct=[K,tt,et,at,nt,ot,st,rt,it];document.addEventListener("DOMContentLoaded",function(){const t=document.querySelector(".slider"),e=document.querySelectorAll(".slide"),a=document.querySelectorAll(".lazy-image"),n=document.querySelector(".slider-indicators");let o=0,s=100;(()=>{const r=new IntersectionObserver((u,I)=>{u.forEach(P=>{if(P.isIntersecting){const w=P.target;w.src=ct[Number(w.dataset.src)-1],w.classList.remove("lazy-image"),I.unobserve(w)}})},{threshold:.1});a.forEach(u=>r.observe(u))})(),e.forEach((r,u)=>{const I=document.createElement("div");I.classList.add("indicator"),I.addEventListener("click",()=>h(u)),n.appendChild(I)});const g=document.querySelectorAll(".indicator");function c(){t.style.transform=`translateX(-${o*s}%)`,f()}function f(){g.forEach((r,u)=>{u===o?r.classList.add("active"):r.classList.remove("active")})}function h(r){o=r,c()}function v(){const r=t.offsetWidth;window.innerWidth>=1280?s=602/r*100:window.innerWidth>=768&&window.innerWidth<945?s=r/1/r*100:s=100,c()}v(),c(),window.addEventListener("resize",v),setInterval(()=>{o=(o+1)%e.length,c()},5e3)});const lt="/tasty-treats/assets/nothing-BxBcHaW7.gif",k=document.getElementById("filter-form"),x=document.getElementById("time-options"),T=document.getElementById("area-options"),R=document.getElementById("ingredient-options"),dt=document.getElementById("time-trigger-text"),gt=document.getElementById("area-trigger-text"),ut=document.getElementById("ingredient-trigger-text"),L=document.getElementById("search"),E=document.getElementById("cancel-btn"),mt=document.getElementById("reset-filter-btn"),N=document.getElementById("loader"),B=document.querySelector(".pagination"),p=document.querySelector(".cards-list"),b=[];let H=[];async function pt(){try{const e=await(await fetch("https://tasty-treats-backend.p.goit.global/api/recipes?limit=9")).json();return $(e.results),e.totalPages}catch(t){return A.error({title:"",message:"Sorry! An error occured while fetching recipes. Please try again!",position:"topRight"}),console.error("API verisi alınırken hata oluştu:",t),"hata"}}function $(t){const e=localStorage.getItem("favArr")?JSON.parse(localStorage.getItem("favArr")):[];p.innerHTML="",t.length===0?(p.innerHTML=`
    <div class="no-results-container loader-container">
      <p class="no-results-text">Sorry! No results were found that match your filters.</p>
      <img class="no-results" src="${lt}"></img>
    </div>`,B.style.display="none"):(B.style.display="flex",t.forEach(a=>{const n=Math.round(a.rating),o=5-n,s=`
      <li class="cards-listing" style="background-image: url(${a.preview});">
      <button class="heard-button add-to-fav" data-category="${a.category}" data-id="${a._id}" aria-label="like-btn">
         <svg class="svg-heard add-to-fav" data-id="${a._id}" width="22px" height="22px">
            <use class="add-to-fav svguse" href="${S}#${e.includes(a._id)?"icon-heart-filled":"icon-heart"}"></use>
        </svg></button>

      <div class="card-content-container">
         <div class="text-container">
            <h3 class="card-title">${a.title}</h3>
              <p class="specification-text">${a.description}</p>
          </div>

          <div class="card-rating-container">
              <div class="rating-container">
                  <p class="rating-text">${a.rating.toFixed(1)}</p>
                  <div class="star-container">
                    ${`<svg class="card-star-svg">
                    <use href="${S}#icon-star"></use>
                      </svg>`.repeat(n)}

                    ${`<svg class="card-star-svg">
                    <use href="${S}#icon-emptystar"></use>
                    </svg>`.repeat(o)}
                  </div>    
                </div>
              
            <button class="recipe-button" data-id="${a._id}">See recipe</button>
        </div>      
      </li>
    `;p.insertAdjacentHTML("beforeend",s)}),z())}function z(){document.querySelectorAll(".recipe-button").forEach(e=>{e.addEventListener("click",function(){const a=this.getAttribute("data-id");_(a)})})}function yt(){localStorage.setItem("favArr",JSON.stringify(b)),localStorage.setItem("favArrCategory",JSON.stringify(H))&&JSON.stringify(H)}function ft(t){const e=t.target.closest(".heard-button");if(e){e.dataset.category;const a=e.dataset.id,n=e.querySelector(".svguse");b.includes(a)?(b.splice(b.indexOf(a),1),n.setAttribute("href",`${S}#icon-heart`)):(b.push(a),n.setAttribute("href",`${S}#icon-heart-filled`)),yt()}}p.addEventListener("click",t=>ft(t));document.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>{pt().then(()=>{z(),F()})},100);const t=localStorage.getItem("favArr");t&&b.push(...JSON.parse(t))});const W=document.getElementById("orderForm"),ht=document.querySelector(".order"),vt=document.querySelector(".close-button");ht.addEventListener("click",t=>bt());vt.addEventListener("click",t=>G());W.addEventListener("submit",t=>{G()});function bt(){document.getElementById("popupOverlay").style.display="block",W.reset()}function G(){document.getElementById("popupOverlay").style.display="none"}const Lt="https://tasty-treats-backend.p.goit.global/api/areas",It="https://tasty-treats-backend.p.goit.global/api/ingredients";async function St(){try{const t=await fetch(Lt);if(!t.ok)throw new Error("Failed to fetch areas");const e=await t.json();j(e)}catch{j([{name:"Sorry no region to select"}])}}function j(t){t.forEach(e=>{const a=`<li data-area="${e.name}" data-name="area" class="option">${e.name}</li>`;T.insertAdjacentHTML("beforeend",a)})}async function Et(){try{const t=await fetch(It);if(!t.ok)throw new Error("Failed to fetch ingredients");const e=await t.json();D(e)}catch{D([{name:"Sorry no ingredients to select"}])}}function D(t){t.forEach(e=>{const a=`<li data-ingredient="${e._id}" data-name="ingredient" class="option">${e.name}</li>`;R.insertAdjacentHTML("beforeend",a)})}function wt(){for(let t=5;t<=120;t+=5){const e=`<li data-time="${t}" data-name="time" class="option">${t} min</li>`;x.insertAdjacentHTML("beforeend",e)}}function U(){localStorage.setItem("time",""),localStorage.setItem("area",""),localStorage.setItem("ingredient",""),localStorage.setItem("title",""),localStorage.setItem("totalPage",""),localStorage.setItem("category","")}document.addEventListener("DOMContentLoaded",()=>{St(),Et(),wt(),U()});let i="https://tasty-treats-backend.p.goit.global/api/recipes?category=&page=1&limit=9";async function M(t){try{p.innerHTML="",q();const e=await fetch(t);if(!e.ok)throw new Error("An error occurred while fetching recipes");const a=await e.json();localStorage.setItem("totalPage",a.totalPages?a.totalPages:1),m(1,"form-read"),$(a.results)}catch(e){A.error({title:"",message:"Sorry! An error occurred while fetching recipes please try again!",position:"topRight"}),console.log(e.message)}finally{O()}}function $t(t,e){if(e.target.tagName!=="LI")return;const a=localStorage.getItem("category"),n=document.getElementById(`${t}-trigger-text`),o=document.getElementById(`${t}-options`),s=e.target.dataset[t];n.textContent=e.target.textContent,localStorage.setItem(`${t}`,s),i=i.includes(t)?i.replace(new RegExp(`${t}=[^&]*`),`${t}=${s}`):`${i}&${t}=${s}`,i=i.includes("category")?i.replace(/category=[^&]*/,`category=${a}`):`${i}&category=${a}`,o.classList.add("hidden-dropdown"),n.classList.add("trigger-active"),console.log(i),M(i)}const J=Z(function(){L.value!==""?E.classList.remove("hidden"):E.classList.add("hidden");const t=localStorage.getItem("category"),e=localStorage.getItem("time"),a=localStorage.getItem("area"),n=localStorage.getItem("ingredient"),o=L.value.trim();i=`https://tasty-treats-backend.p.goit.global/api/recipes?category=${t}&page=1&limit=9&time=${e}&area=${a}&ingredient=${n}&title=${o}`,localStorage.setItem("title",L.value?o:""),M(i)},300);function V(){i="https://tasty-treats-backend.p.goit.global/api/recipes?category=&page=1&limit=9",[dt,gt,ut].forEach(e=>{e.textContent="Select",e.classList.remove("trigger-active")}),L.value="",document.querySelectorAll(".category-btn").forEach(e=>{e.style.color=""}),E.classList.add("hidden"),U(),M(i)}function kt(){L.value="",E.classList.add("hidden"),J()}function q(){N.classList.remove("hidden"),B.style.display="none"}function O(){N.classList.add("hidden")}function Q(){[x,T,R].forEach(t=>t.classList.add("hidden-dropdown"))}function Bt(t){k&&!k.contains(t.target)&&Q()}function Ct(t){let e=t.target.id;switch((t.target.tagName==="svg"||t.target.tagName==="SPAN")&&(e=t.target.parentElement.id),e){case"time-trigger":x.classList.toggle("hidden-dropdown");break;case"area-trigger":T.classList.toggle("hidden-dropdown");break;case"ingredient-trigger":R.classList.toggle("hidden-dropdown");break;default:if(t.target.tagName==="LI"){const a=t.target.dataset.name;$t(a,t)}else Q()}}k.addEventListener("click",t=>Ct(t));L.addEventListener("input",J);E.addEventListener("click",kt);mt.addEventListener("click",V);window.addEventListener("click",t=>Bt(t));const At=document.querySelector(".pagination"),xt=document.querySelectorAll(".page-number"),Tt=document.getElementById("singleLeft"),Rt=document.getElementById("singleRight"),Mt=document.getElementById("doubleLeft"),qt=document.getElementById("doubleRight");let l=1,d=1,X=null;async function Ot(){d=await Ht(),X=d,Y()}async function Pt(t){p.innerHTML="",q();try{const e=await fetch(t);if(!e.ok)throw new Error("An error occurred while fetching recipes");const a=await e.json();$(a.results)}catch{A.error({title:"",message:"Sorry! An error occurred while fetching recipes please try again!",position:"topRight"})}finally{O()}}async function Ht(){try{return(await(await fetch("https://tasty-treats-backend.p.goit.global/api/recipes?limit=9")).json()).totalPages}catch(t){return console.error("API verisi alınırken hata oluştu:",t),1}}function Y(){let t=-1;l==d&&d!=1&&(t=-2),l!=d&&l==1&&(t=0),xt.forEach((e,a)=>{const n=l+t+a;e.textContent=n,e.classList.toggle("active-page",n==l),e.style.display=n>0&&n<=d?"inline-block":"none"}),Tt.disabled=l==1,Mt.disabled=l==1,Rt.disabled=l==d,qt.disabled=l==d}function m(t,e){console.log("page : ",t),d=localStorage.getItem("totalPage")?Number(localStorage.getItem("totalPage")):X,console.log("total page : ",d),t>=1&&t<=d&&(l=t,Y()),e=="page-number"&&jt(t)}function jt(t){const e=localStorage.getItem("time"),a=localStorage.getItem("category")?localStorage.getItem("category"):"",n=localStorage.getItem("area"),o=localStorage.getItem("ingredient"),s=localStorage.getItem("title");Pt(`https://tasty-treats-backend.p.goit.global/api/recipes?category=${a}&page=${t}&limit=9&time=${e}&area=${n}&ingredient=${o}&title=${s}`)}At.addEventListener("click",t=>{t.target.classList.contains("page-number")?m(parseInt(t.target.textContent),"page-number"):t.target.id==="singleLeft"?m(l-1,"page-number"):t.target.id==="singleRight"?m(l+1,"page-number"):t.target.id==="doubleLeft"?m(1,"page-number"):t.target.id==="doubleRight"&&m(d,"page-number")});document.addEventListener("DOMContentLoaded",Ot);const Dt=document.querySelector(".category-items-list"),Ft=document.querySelector(".categories-button");async function _t(){const t="https://tasty-treats-backend.p.goit.global/api/categories";localStorage.setItem("category","");try{const n=(await(await fetch(t)).json()).map(o=>o.name);Wt(n),zt()}catch(e){console.log(e+"fetching categories")}}async function Nt(t){const e=localStorage.getItem("time"),a=localStorage.getItem("area"),n=localStorage.getItem("ingredient"),o=localStorage.getItem("title");console.log("boş",e,a,n);const s=`https://tasty-treats-backend.p.goit.global/api/recipes?category=${t}&page=1&limit=9&time=${e}&area=${a}&ingredient=${n}&title=${o}`;try{p.innerHTML="",q();const g=await(await fetch(s)).json();localStorage.setItem("totalPage",g.totalPages?g.totalPages:1),localStorage.setItem("category",t);const c=g.results;$(c)}catch(y){console.log(y+"fetching chosen category recipes")}finally{O(),m(1,"category-list")}}function zt(){const t=document.querySelectorAll(".category-btn");t.forEach(e=>{e.addEventListener("click",a=>{t.forEach(o=>{o.style.color=""}),a.target.style.color="var(--primary-color)";let n=a.target.innerText;localStorage.setItem("category",n),Nt(n)})})}function Wt(t){t.forEach(e=>{Dt.innerHTML+=`
            <li class="category-items"><button class="category-btn">${e}</button></li>
        `})}Ft.addEventListener("click",V);document.addEventListener("DOMContentLoaded",_t);document.addEventListener("DOMContentLoaded",()=>{F(),Gt()});async function Gt(){try{const a=await(await fetch("https://tasty-treats-backend.p.goit.global/api/recipes/popular")).json(),n=document.querySelector("#popular-recipes-gallery");n.innerHTML="";const o=document.createDocumentFragment();a.forEach((s,y)=>{const g=document.createElement("li"),c=document.createElement("div");c.classList.add("recipe-container"),(y===2||y===3)&&c.classList.add("mobile-special");const f=document.createElement("img");f.src=s.preview||"default-image.jpg",f.alt=s.title||"Unknown Recipe",f.addEventListener("click",()=>{s._id?_(s._id):console.warn("Recipe ID is undefined!")});const h=document.createElement("div");h.classList.add("recipe-content");const v=document.createElement("h2");v.textContent=s.title||"Unknown Recipe",v.classList.add("recipe-content-title");const r=document.createElement("p");r.textContent=s.description||"No instructions provided",r.classList.add("recipe-content-instructions"),h.appendChild(v),h.appendChild(r),c.appendChild(f),c.appendChild(h),g.appendChild(c),o.appendChild(g)}),n.appendChild(o)}catch(t){console.error("Error fetching data:",t)}}const C=document.getElementById("scrollBtn");function Ut(){window.scrollY>300?C.style.display="block":C.style.display="none"}function Jt(t){t.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})}window.addEventListener("scroll",Ut);C.addEventListener("click",t=>Jt(t));
//# sourceMappingURL=index.js.map
