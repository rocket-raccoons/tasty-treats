const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/modal-CvRGhZQf.js","assets/modal-76QfGnuE.css"])))=>i.map(i=>d[i]);
import{i as F,s as S,o as N}from"./assets/modal-CvRGhZQf.js";import{i as A,d as K}from"./assets/vendor-BE0UidyL.js";const tt="modulepreload",et=function(t){return"/tasty-treats/"+t},_={},nt=function(e,n,a){let o=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),c=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));o=Promise.allSettled(n.map(r=>{if(r=et(r),r in _)return;_[r]=!0;const m=r.endsWith(".css"),y=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${y}`))return;const d=document.createElement("link");if(d.rel=m?"stylesheet":tt,m||(d.as="script"),d.crossOrigin="",d.href=r,c&&d.setAttribute("nonce",c),document.head.appendChild(d),m)return new Promise((l,f)=>{d.addEventListener("load",l),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${r}`)))})}))}function s(i){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=i,window.dispatchEvent(c),!c.defaultPrevented)throw i}return o.then(i=>{for(const c of i||[])c.status==="rejected"&&s(c.reason);return e().catch(s)})},at="/tasty-treats/assets/1-rDOwHOuF.webp",ot="/tasty-treats/assets/2-4skkltV-.webp",st="/tasty-treats/assets/3-D0-ZMNjm.webp",rt="/tasty-treats/assets/4-BmSdx1zx.webp",it="/tasty-treats/assets/5-BCo80kwS.webp",ct="/tasty-treats/assets/5-BCo80kwS.webp",lt="/tasty-treats/assets/7-CqGGUQ5C.webp",dt="/tasty-treats/assets/8-GawR9MF4.webp",gt="/tasty-treats/assets/8-GawR9MF4.webp",ut=[at,ot,st,rt,it,ct,lt,dt,gt];document.addEventListener("DOMContentLoaded",function(){setTimeout(()=>{nt(()=>import("./assets/modal-CvRGhZQf.js").then(t=>t.a),__vite__mapDeps([0,1])).then(()=>{const t=document.querySelector(".slider"),e=document.querySelectorAll(".slide"),n=document.querySelectorAll(".lazy-image"),a=document.querySelector(".slider-indicators");let o=0,s=100;(()=>{const l=new IntersectionObserver((f,E)=>{f.forEach(q=>{if(q.isIntersecting){const w=q.target;w.src=ut[Number(w.dataset.src)-1],w.classList.remove("lazy-image"),E.unobserve(w)}})},{threshold:.1});n.forEach(f=>l.observe(f))})(),e.forEach((l,f)=>{const E=document.createElement("div");E.classList.add("indicator"),E.addEventListener("click",()=>y(f)),a.appendChild(E)});const c=document.querySelectorAll(".indicator");function r(){t.style.transform=`translateX(-${o*s}%)`,m()}function m(){c.forEach((l,f)=>{f===o?l.classList.add("active"):l.classList.remove("active")})}function y(l){o=l,r()}function d(){const l=t.offsetWidth;window.innerWidth>=1280?s=602/l*100:window.innerWidth>=768&&window.innerWidth<945?s=l/1/l*100:s=100,r()}d(),r(),window.addEventListener("resize",d),setInterval(()=>{o=(o+1)%e.length,r()},5e3)}).catch(t=>{console.error("CSS yüklenirken bir hata oluştu:",t)})},100)});const mt="/tasty-treats/assets/nothing-BxBcHaW7.gif",B=document.getElementById("filter-form"),T=document.getElementById("time-options"),M=document.getElementById("area-options"),P=document.getElementById("ingredient-options"),pt=document.getElementById("time-trigger-text"),ft=document.getElementById("area-trigger-text"),yt=document.getElementById("ingredient-trigger-text"),L=document.getElementById("search"),I=document.getElementById("cancel-btn"),ht=document.getElementById("reset-filter-btn"),U=document.getElementById("loader"),k=document.querySelector(".pagination"),v=document.querySelector(".cards-list"),b=[];let j=[];async function vt(){try{const e=await(await fetch("https://tasty-treats-backend.p.goit.global/api/recipes?limit=9")).json();return $(e.results),e.totalPages}catch(t){return A.error({title:"",message:"Sorry! An error occured while fetching recipes. Please try again!",position:"topRight"}),console.error("API verisi alınırken hata oluştu:",t),"hata"}}function $(t){const e=localStorage.getItem("favArr")?JSON.parse(localStorage.getItem("favArr")):[];v.innerHTML="",t.length===0?(v.innerHTML=`
    <div class="no-results-container loader-container">
      <p class="no-results-text">Sorry! No results were found that match your filters.</p>
      <img class="no-results" src="${mt}"></img>
    </div>`,k.classList.add("hidden")):(k.classList.remove("hidden"),t.forEach(n=>{const a=Math.round(n.rating),o=5-a,s=`
      <li class="cards-listing" style="background-image: url(${n.preview});">
      <button class="heard-button add-to-fav" data-category="${n.category}" data-id="${n._id}" aria-label="like-btn">
         <svg class="svg-heard add-to-fav" data-id="${n._id}" width="22px" height="22px">
            <use class="add-to-fav svguse" href="${S}#${e.includes(n._id)?"icon-heart-filled":"icon-heart"}"></use>
        </svg></button>

      <div class="card-content-container">
         <div class="text-container">
            <h3 class="card-title">${n.title}</h3>
              <p class="specification-text">${n.description}</p>
          </div>

          <div class="card-rating-container">
              <div class="rating-container">
                  <p class="rating-text">${n.rating.toFixed(1)}</p>
                  <div class="star-container">
                    ${`<svg class="card-star-svg">
                    <use href="${S}#icon-star"></use>
                      </svg>`.repeat(a)}

                    ${`<svg class="card-star-svg">
                    <use href="${S}#icon-emptystar"></use>
                    </svg>`.repeat(o)}
                  </div>    
                </div>
              
            <button class="recipe-button" data-id="${n._id}">See recipe</button>
        </div>      
      </li>
    `;v.insertAdjacentHTML("beforeend",s)}),W())}function W(){document.querySelectorAll(".recipe-button").forEach(e=>{e.addEventListener("click",function(){const n=this.getAttribute("data-id");N(n)})})}function bt(){localStorage.setItem("favArr",JSON.stringify(b)),localStorage.setItem("favArrCategory",JSON.stringify(j))&&JSON.stringify(j)}function Lt(t){const e=t.target.closest(".heard-button");if(e){e.dataset.category;const n=e.dataset.id,a=e.querySelector(".svguse");b.includes(n)?(b.splice(b.indexOf(n),1),a.setAttribute("href",`${S}#icon-heart`)):(b.push(n),a.setAttribute("href",`${S}#icon-heart-filled`)),bt()}}v.addEventListener("click",t=>Lt(t));document.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>{vt().then(()=>{W(),F()})},100);const t=localStorage.getItem("favArr");t&&b.push(...JSON.parse(t))});const z=document.getElementById("orderForm"),Et=document.querySelector(".order"),St=document.querySelector(".close-button");Et.addEventListener("click",t=>It());St.addEventListener("click",t=>G());z.addEventListener("submit",t=>{G()});function It(){document.getElementById("popupOverlay").style.display="block",z.reset()}function G(){document.getElementById("popupOverlay").style.display="none"}const wt="https://tasty-treats-backend.p.goit.global/api/areas",kt="https://tasty-treats-backend.p.goit.global/api/ingredients";async function $t(){try{const t=await fetch(wt);if(!t.ok)throw new Error("Failed to fetch areas");const e=await t.json();D(e)}catch{D([{name:"Sorry no region to select"}])}}function D(t){t.forEach(e=>{const n=`<li data-area="${e.name}" data-name="area" class="option">${e.name}</li>`;M.insertAdjacentHTML("beforeend",n)})}async function Bt(){try{const t=await fetch(kt);if(!t.ok)throw new Error("Failed to fetch ingredients");const e=await t.json();H(e)}catch{H([{name:"Sorry no ingredients to select"}])}}function H(t){t.forEach(e=>{const n=`<li data-ingredient="${e._id}" data-name="ingredient" class="option">${e.name}</li>`;P.insertAdjacentHTML("beforeend",n)})}function Ct(){for(let t=5;t<=120;t+=5){const e=`<li data-time="${t}" data-name="time" class="option">${t} min</li>`;T.insertAdjacentHTML("beforeend",e)}}function J(){localStorage.setItem("time",""),localStorage.setItem("area",""),localStorage.setItem("ingredient",""),localStorage.setItem("title",""),localStorage.setItem("totalPage",""),localStorage.setItem("category","")}document.addEventListener("DOMContentLoaded",()=>{$t(),Bt(),Ct(),J()});let g="https://tasty-treats-backend.p.goit.global/api/recipes?category=&page=1&limit=9";async function R(t){try{v.innerHTML="",x();const e=await fetch(t);if(!e.ok)throw new Error("An error occurred while fetching recipes");const n=await e.json();localStorage.setItem("totalPage",n.totalPages?n.totalPages:1),h(1,"form-read"),$(n.results)}catch(e){A.error({title:"",message:"Sorry! An error occurred while fetching recipes please try again!",position:"topRight"}),console.log(e.message)}finally{O()}}function At(t,e){if(e.target.tagName!=="LI")return;const n=localStorage.getItem("category"),a=document.getElementById(`${t}-trigger-text`),o=document.getElementById(`${t}-options`),s=e.target.dataset[t];a.textContent=e.target.textContent,localStorage.setItem(`${t}`,s),g=g.includes(t)?g.replace(new RegExp(`${t}=[^&]*`),`${t}=${s}`):`${g}&${t}=${s}`,g=g.includes("category")?g.replace(/category=[^&]*/,`category=${n}`):`${g}&category=${n}`,o.classList.add("hidden-dropdown"),a.classList.add("trigger-active"),console.log(g),R(g)}const V=K(function(){L.value!==""?I.classList.remove("hidden"):I.classList.add("hidden");const t=localStorage.getItem("category"),e=localStorage.getItem("time"),n=localStorage.getItem("area"),a=localStorage.getItem("ingredient"),o=L.value.trim();g=`https://tasty-treats-backend.p.goit.global/api/recipes?category=${t}&page=1&limit=9&time=${e}&area=${n}&ingredient=${a}&title=${o}`,localStorage.setItem("title",L.value?o:""),R(g)},300);function Q(){g="https://tasty-treats-backend.p.goit.global/api/recipes?category=&page=1&limit=9",[pt,ft,yt].forEach(e=>{e.textContent="Select",e.classList.remove("trigger-active")}),L.value="",document.querySelectorAll(".category-btn").forEach(e=>{e.style.color=""}),I.classList.add("hidden"),J(),R(g)}function Tt(){L.value="",I.classList.add("hidden"),V()}function x(){U.classList.remove("hidden"),k.classList.add("hidden-pagination")}function O(){U.classList.add("hidden"),k.classList.remove("hidden-pagination")}function X(){[T,M,P].forEach(t=>t.classList.add("hidden-dropdown"))}function Mt(t){B&&!B.contains(t.target)&&X()}function Pt(t){let e=t.target.id;switch((t.target.tagName==="svg"||t.target.tagName==="SPAN")&&(e=t.target.parentElement.id),e){case"time-trigger":T.classList.toggle("hidden-dropdown");break;case"area-trigger":M.classList.toggle("hidden-dropdown");break;case"ingredient-trigger":P.classList.toggle("hidden-dropdown");break;default:if(t.target.tagName==="LI"){const n=t.target.dataset.name;At(n,t)}else X()}}B.addEventListener("click",t=>Pt(t));L.addEventListener("input",V);I.addEventListener("click",Tt);ht.addEventListener("click",Q);window.addEventListener("click",t=>Mt(t));const Rt=document.querySelector(".pagination"),xt=document.querySelectorAll(".page-number"),Ot=document.getElementById("singleLeft"),qt=document.getElementById("singleRight"),_t=document.getElementById("doubleLeft"),jt=document.getElementById("doubleRight");let u=1,p=1,Y=null;async function Dt(){p=await Ft(),Y=p,Z()}async function Ht(t){v.innerHTML="",x();try{const e=await fetch(t);if(!e.ok)throw new Error("An error occurred while fetching recipes");const n=await e.json();$(n.results)}catch{A.error({title:"",message:"Sorry! An error occurred while fetching recipes please try again!",position:"topRight"})}finally{O()}}async function Ft(){try{return(await(await fetch("https://tasty-treats-backend.p.goit.global/api/recipes?limit=9")).json()).totalPages}catch(t){return console.error("API verisi alınırken hata oluştu:",t),1}}function Z(){let t=-1;u==p&&p!=1&&(t=-2),u!=p&&u==1&&(t=0),xt.forEach((e,n)=>{const a=u+t+n;e.textContent=a,e.classList.toggle("active-page",a==u),e.style.display=a>0&&a<=p?"inline-block":"none"}),Ot.disabled=u==1,_t.disabled=u==1,qt.disabled=u==p,jt.disabled=u==p}function h(t,e){p=localStorage.getItem("totalPage")?Number(localStorage.getItem("totalPage")):Y,t>=1&&t<=p&&(u=t,Z()),e=="page-number"&&Nt(t)}function Nt(t){const e=localStorage.getItem("time"),n=localStorage.getItem("category")?localStorage.getItem("category"):"",a=localStorage.getItem("area"),o=localStorage.getItem("ingredient"),s=localStorage.getItem("title");Ht(`https://tasty-treats-backend.p.goit.global/api/recipes?category=${n}&page=${t}&limit=9&time=${e}&area=${a}&ingredient=${o}&title=${s}`)}Rt.addEventListener("click",t=>{t.target.classList.contains("page-number")?h(parseInt(t.target.textContent),"page-number"):t.target.id==="singleLeft"?h(u-1,"page-number"):t.target.id==="singleRight"?h(u+1,"page-number"):t.target.id==="doubleLeft"?h(1,"page-number"):t.target.id==="doubleRight"&&h(p,"page-number")});document.addEventListener("DOMContentLoaded",Dt);const Ut=document.querySelector(".category-items-list"),Wt=document.querySelector(".categories-button");async function zt(){const t="https://tasty-treats-backend.p.goit.global/api/categories";localStorage.setItem("category","");try{const a=(await(await fetch(t)).json()).map(o=>o.name);Vt(a),Jt()}catch(e){console.log(e+"fetching categories")}}async function Gt(t){const e=localStorage.getItem("time"),n=localStorage.getItem("area"),a=localStorage.getItem("ingredient"),o=localStorage.getItem("title");console.log("boş",e,n,a);const s=`https://tasty-treats-backend.p.goit.global/api/recipes?category=${t}&page=1&limit=9&time=${e}&area=${n}&ingredient=${a}&title=${o}`;try{v.innerHTML="",x();const c=await(await fetch(s)).json();localStorage.setItem("totalPage",c.totalPages?c.totalPages:1),localStorage.setItem("category",t);const r=c.results;$(r)}catch(i){console.log(i+"fetching chosen category recipes")}finally{O(),h(1,"category-list")}}function Jt(){const t=document.querySelectorAll(".category-btn");t.forEach(e=>{e.addEventListener("click",n=>{t.forEach(o=>{o.style.color=""}),n.target.style.color="var(--primary-color)";let a=n.target.innerText;localStorage.setItem("category",a),Gt(a)})})}function Vt(t){t.forEach(e=>{Ut.innerHTML+=`
            <li class="category-items"><button class="category-btn">${e}</button></li>
        `})}Wt.addEventListener("click",Q);document.addEventListener("DOMContentLoaded",zt);document.addEventListener("DOMContentLoaded",()=>{F(),Qt()});async function Qt(){try{const n=await(await fetch("https://tasty-treats-backend.p.goit.global/api/recipes/popular")).json(),a=document.querySelector("#popular-recipes-gallery");a.innerHTML="";const o=document.createDocumentFragment();n.forEach((s,i)=>{const c=document.createElement("li"),r=document.createElement("div");r.classList.add("recipe-container"),(i===2||i===3)&&r.classList.add("mobile-special");const m=document.createElement("img");m.src=s.preview||"default-image.jpg",m.alt=s.title||"Unknown Recipe",m.addEventListener("click",()=>{s._id?N(s._id):console.warn("Recipe ID is undefined!")});const y=document.createElement("div");y.classList.add("recipe-content");const d=document.createElement("h2");d.textContent=s.title||"Unknown Recipe",d.classList.add("recipe-content-title");const l=document.createElement("p");l.textContent=s.description||"No instructions provided",l.classList.add("recipe-content-instructions"),y.appendChild(d),y.appendChild(l),r.appendChild(m),r.appendChild(y),c.appendChild(r),o.appendChild(c)}),a.appendChild(o)}catch(t){console.error("Error fetching data:",t)}}const C=document.getElementById("scrollBtn");function Xt(){window.scrollY>300?C.style.display="block":C.style.display="none"}function Yt(t){t.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})}window.addEventListener("scroll",Xt);C.addEventListener("click",t=>Yt(t));document.addEventListener("DOMContentLoaded",function(){function t(){let o=document.getElementById("myModal");o&&(o.style.display="block")}function e(){let o=document.getElementById("myModal");o&&(o.style.display="none")}let n=document.getElementById("openModalBtn"),a=document.getElementById("closeModelBtn");n&&n.addEventListener("click",t),a&&a.addEventListener("click",e)});
//# sourceMappingURL=index.js.map
