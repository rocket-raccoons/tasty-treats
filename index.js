import"./assets/footer-mascot-ChQz6Ss3.js";import{i as B,d as Q}from"./assets/vendor-BE0UidyL.js";document.addEventListener("DOMContentLoaded",function(){const t=document.querySelector(".slider"),e=document.querySelectorAll(".slide"),n=document.querySelector(".slider-indicators");let a=0,o=100;e.forEach((i,m)=>{const f=document.createElement("div");f.classList.add("indicator"),f.addEventListener("click",()=>g(m)),n.appendChild(f)});const r=document.querySelectorAll(".indicator");function d(){t.style.transform=`translateX(-${a*o}%)`,u()}function u(){r.forEach((i,m)=>{m===a?i.classList.add("active"):i.classList.remove("active")})}function g(i){a=i,d()}function p(){const i=t.offsetWidth;window.innerWidth>=1280?o=602/i*100:window.innerWidth>=768&&window.innerWidth<945?o=i/1/i*100:o=100,d()}p(),d(),window.addEventListener("resize",p),setInterval(()=>{a=(a+1)%e.length,d()},5e3)});function H(){const t=document.getElementById("recipeModal"),e=t.querySelector(".modal-close-button");e.onclick=S,window.onclick=function(n){n.target===t&&S()},document.addEventListener("keydown",function(n){n.key==="Escape"&&t.style.display==="block"&&S()})}async function j(t){const e=document.getElementById("recipeModal"),n=e.querySelector(".modal-content");n.innerHTML="<p>Loading recipe details...</p>",e.style.display="block";try{const o=await(await fetch(`https://tasty-treats-backend.p.goit.global/api/recipes/${t}`)).json();console.log(o.time),n.innerHTML=`
        <div class= "modal-heading">
          <div style="flex: 1;">
            <iframe class="modal-iframe" src="https://www.youtube.com/embed/${new URL(o.youtube).searchParams.get("v")}" frameborder="0" allowfullscreen></iframe>
          </div>
        <div class="modal-recipe-container" style="flex: 1;">
        <h2>${o.title}</h2>
        <div class="modal-rating-container">
        <div class="modal-star-container">
        <p class="rating star_rating">${"★".repeat(Math.round(o.rating))}☆</p>
        </div>
        <p class="cooking-time">${o.time} min</p>
        </div>
        <div class="modal-recipe-ingredients-container">
        <!-- <h3>Ingredients:</h3> -->
        <ul class="modal-recipe-ingredients">
          ${o.ingredients.map(r=>`<li class="modal-recipe-ingredients-item"><p class="ingredient">${r.name}</p><p class="ingredient-portion"> ${r.measure}</p></li>`).join("")}
        </ul>
        </div>
        </div>
        </div>
        <p>${o.instructions}</p>
        <div style="display: flex; gap: 20px; margin-top: 20px;">
          <button class="addToFavoriteButton">Add to Favorite</button>
          <button class="giveRatingButton">Give a Rating</button>
        </div>
        </div>
      `}catch(a){console.error("Error fetching recipe details:",a),n.innerHTML="<p>Error loading recipe details. Please try again.</p>"}}function S(){const t=document.getElementById("recipeModal");t.style.display="none"}const L="/tasty-treats/assets/sprite-B_ptjhEe.svg",X="/tasty-treats/assets/nothing-BxBcHaW7.gif",w=document.getElementById("filter-form"),A=document.getElementById("time-options"),C=document.getElementById("area-options"),T=document.getElementById("ingredient-options"),Y=document.getElementById("time-trigger-text"),K=document.getElementById("area-trigger-text"),Z=document.getElementById("ingredient-trigger-text"),b=document.getElementById("search"),E=document.getElementById("cancel-btn"),tt=document.getElementById("reset-filter-btn"),_=document.getElementById("loader"),$=document.querySelector(".pagination"),h=document.querySelector(".cards-list"),v=[];let P=[];async function et(){try{const e=await(await fetch("https://tasty-treats-backend.p.goit.global/api/recipes?limit=9")).json();return I(e.results),e.totalPages}catch(t){return B.error({title:"",message:"Sorry! An error occured while fetching recipes. Please try again!",position:"topRight"}),console.error("API verisi alınırken hata oluştu:",t),"hata"}}function I(t){const e=localStorage.getItem("favArr")?JSON.parse(localStorage.getItem("favArr")):[];h.innerHTML="",t.length===0?(h.innerHTML=`
    <div class="no-results-container loader-container">
      <p class="no-results-text">Sorry! No results were found that match your filters.</p>
      <img class="no-results" src="${X}"></img>
    </div>`,$.style.display="none"):($.style.display="flex",t.forEach(n=>{const a=Math.round(n.rating),o=5-a,r=`
      <li class="cards-listing" style="background-image: url(${n.preview});">
      <button class="heard-button add-to-fav" data-category="${n.category}" data-id="${n._id}" aria-label="like-btn">
         <svg class="svg-heard add-to-fav" data-id="${n._id}" width="22px" height="22px">
            <use class="add-to-fav svguse" href="${L}#${e.includes(n._id)?"icon-heart-filled":"icon-heart"}"></use>
        </svg></button>

      <div class="card-content-container">
         <div class="text-container">
            <h3 class="card-title">${n.title}</h3>
              <p class="specification-text">${n.description}</p>
          </div>

          <div class="card-rating-container">
              <div class="rating-container">
                  <p class="rating-text">${n.rating.toFixed(1)}</p>
                  <div class="star-container">
                    ${`<svg class="card-star-svg">
                    <use href="${L}#icon-star"></use>
                      </svg>`.repeat(a)}

                    ${`<svg class="card-star-svg">
                    <use href="${L}#icon-emptystar"></use>
                    </svg>`.repeat(o)}
                  </div>    
                </div>
              
            <button class="recipe-button" data-id="${n._id}">See recipe</button>
        </div>      
      </li>
    `;h.insertAdjacentHTML("beforeend",r)}),F())}function F(){document.querySelectorAll(".recipe-button").forEach(e=>{e.addEventListener("click",function(){const n=this.getAttribute("data-id");j(n)})})}function nt(){localStorage.setItem("favArr",JSON.stringify(v)),localStorage.setItem("favArrCategory",JSON.stringify(P))&&JSON.stringify(P)}function at(t){const e=t.target.closest(".heard-button");if(e){e.dataset.category;const n=e.dataset.id,a=e.querySelector(".svguse");v.includes(n)?(v.splice(v.indexOf(n),1),a.setAttribute("href",`${L}#icon-heart`)):(v.push(n),a.setAttribute("href",`${L}#icon-heart-filled`)),nt()}}h.addEventListener("click",t=>at(t));document.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>{et().then(()=>{F(),H()})},100);const t=localStorage.getItem("favArr");t&&v.push(...JSON.parse(t))});const D=document.getElementById("orderForm"),ot=document.querySelector(".order"),rt=document.querySelector(".close-button");ot.addEventListener("click",t=>it());rt.addEventListener("click",t=>N());D.addEventListener("submit",t=>{N()});function it(){document.getElementById("popupOverlay").style.display="block",D.reset()}function N(){document.getElementById("popupOverlay").style.display="none"}const st="https://tasty-treats-backend.p.goit.global/api/areas",ct="https://tasty-treats-backend.p.goit.global/api/ingredients";async function lt(){try{const t=await fetch(st);if(!t.ok)throw new Error("Failed to fetch areas");const e=await t.json();q(e)}catch{q([{name:"Sorry no region to select"}])}}function q(t){t.forEach(e=>{const n=`<li data-area="${e.name}" data-name="area" class="option">${e.name}</li>`;C.insertAdjacentHTML("beforeend",n)})}async function dt(){try{const t=await fetch(ct);if(!t.ok)throw new Error("Failed to fetch ingredients");const e=await t.json();O(e)}catch{O([{name:"Sorry no ingredients to select"}])}}function O(t){t.forEach(e=>{const n=`<li data-ingredient="${e._id}" data-name="ingredient" class="option">${e.name}</li>`;T.insertAdjacentHTML("beforeend",n)})}function gt(){for(let t=5;t<=120;t+=5){const e=`<li data-time="${t}" data-name="time" class="option">${t} min</li>`;A.insertAdjacentHTML("beforeend",e)}}function W(){localStorage.setItem("time",""),localStorage.setItem("area",""),localStorage.setItem("ingredient",""),localStorage.setItem("title",""),localStorage.setItem("totalPage",""),localStorage.setItem("category","")}document.addEventListener("DOMContentLoaded",()=>{lt(),dt(),gt(),W()});let s="https://tasty-treats-backend.p.goit.global/api/recipes?category=&page=1&limit=9";async function x(t){try{h.innerHTML="",M();const e=await fetch(t);if(!e.ok)throw new Error("An error occurred while fetching recipes");const n=await e.json();localStorage.setItem("totalPage",n.totalPages?n.totalPages:1),y(1,"form-read"),I(n.results)}catch(e){B.error({title:"",message:"Sorry! An error occurred while fetching recipes please try again!",position:"topRight"}),console.log(e.message)}finally{R()}}function ut(t,e){if(e.target.tagName!=="LI")return;const n=localStorage.getItem("category"),a=document.getElementById(`${t}-trigger-text`),o=document.getElementById(`${t}-options`),r=e.target.dataset[t];a.textContent=e.target.textContent,localStorage.setItem(`${t}`,r),s=s.includes(t)?s.replace(new RegExp(`${t}=[^&]*`),`${t}=${r}`):`${s}&${t}=${r}`,s=s.includes("category")?s.replace(/category=[^&]*/,`category=${n}`):`${s}&category=${n}`,o.classList.add("hidden-dropdown"),a.classList.add("trigger-active"),console.log(s),x(s)}const U=Q(function(){b.value!==""?E.classList.remove("hidden"):E.classList.add("hidden");const t=localStorage.getItem("category"),e=localStorage.getItem("time"),n=localStorage.getItem("area"),a=localStorage.getItem("ingredient"),o=b.value.trim();s=`https://tasty-treats-backend.p.goit.global/api/recipes?category=${t}&page=1&limit=9&time=${e}&area=${n}&ingredient=${a}&title=${o}`,localStorage.setItem("title",b.value?o:""),x(s)},300);function J(){s="https://tasty-treats-backend.p.goit.global/api/recipes?category=&page=1&limit=9",[Y,K,Z].forEach(e=>{e.textContent="Select",e.classList.remove("trigger-active")}),b.value="",document.querySelectorAll(".category-btn").forEach(e=>{e.style.color=""}),E.classList.add("hidden"),W(),x(s)}function pt(){b.value="",E.classList.add("hidden"),U()}function M(){_.classList.remove("hidden"),$.style.display="none"}function R(){_.classList.add("hidden")}function G(){[A,C,T].forEach(t=>t.classList.add("hidden-dropdown"))}function mt(t){w&&!w.contains(t.target)&&G()}function ft(t){let e=t.target.id;switch((t.target.tagName==="svg"||t.target.tagName==="SPAN")&&(e=t.target.parentElement.id),e){case"time-trigger":A.classList.toggle("hidden-dropdown");break;case"area-trigger":C.classList.toggle("hidden-dropdown");break;case"ingredient-trigger":T.classList.toggle("hidden-dropdown");break;default:if(t.target.tagName==="LI"){const n=t.target.dataset.name;ut(n,t)}else G()}}w.addEventListener("click",t=>ft(t));b.addEventListener("input",U);E.addEventListener("click",pt);tt.addEventListener("click",J);window.addEventListener("click",t=>mt(t));const yt=document.querySelector(".pagination"),ht=document.querySelectorAll(".page-number"),vt=document.getElementById("singleLeft"),bt=document.getElementById("singleRight"),Lt=document.getElementById("doubleLeft"),Et=document.getElementById("doubleRight");let c=1,l=1,z=null;async function It(){l=await wt(),z=l,V()}async function St(t){h.innerHTML="",M();try{const e=await fetch(t);if(!e.ok)throw new Error("An error occurred while fetching recipes");const n=await e.json();I(n.results)}catch{B.error({title:"",message:"Sorry! An error occurred while fetching recipes please try again!",position:"topRight"})}finally{R()}}async function wt(){try{return(await(await fetch("https://tasty-treats-backend.p.goit.global/api/recipes?limit=9")).json()).totalPages}catch(t){return console.error("API verisi alınırken hata oluştu:",t),1}}function V(){let t=-1;c==l&&l!=1&&(t=-2),c!=l&&c==1&&(t=0),ht.forEach((e,n)=>{const a=c+t+n;e.textContent=a,e.classList.toggle("active-page",a==c),e.style.display=a>0&&a<=l?"inline-block":"none"}),vt.disabled=c==1,Lt.disabled=c==1,bt.disabled=c==l,Et.disabled=c==l}function y(t,e){console.log("page : ",t),l=localStorage.getItem("totalPage")?Number(localStorage.getItem("totalPage")):z,console.log("total page : ",l),t>=1&&t<=l&&(c=t,V()),e=="page-number"&&$t(t)}function $t(t){const e=localStorage.getItem("time"),n=localStorage.getItem("category")?localStorage.getItem("category"):"",a=localStorage.getItem("area"),o=localStorage.getItem("ingredient"),r=localStorage.getItem("title");St(`https://tasty-treats-backend.p.goit.global/api/recipes?category=${n}&page=${t}&limit=9&time=${e}&area=${a}&ingredient=${o}&title=${r}`)}yt.addEventListener("click",t=>{t.target.classList.contains("page-number")?y(parseInt(t.target.textContent),"page-number"):t.target.id==="singleLeft"?y(c-1,"page-number"):t.target.id==="singleRight"?y(c+1,"page-number"):t.target.id==="doubleLeft"?y(1,"page-number"):t.target.id==="doubleRight"&&y(l,"page-number")});document.addEventListener("DOMContentLoaded",It);const kt=document.querySelector(".category-items-list"),Bt=document.querySelector(".categories-button");async function At(){const t="https://tasty-treats-backend.p.goit.global/api/categories";localStorage.setItem("category","");try{const a=(await(await fetch(t)).json()).map(o=>o.name);xt(a),Tt()}catch(e){console.log(e+"fetching categories")}}async function Ct(t){const e=localStorage.getItem("time"),n=localStorage.getItem("area"),a=localStorage.getItem("ingredient"),o=localStorage.getItem("title");console.log("boş",e,n,a);const r=`https://tasty-treats-backend.p.goit.global/api/recipes?category=${t}&page=1&limit=9&time=${e}&area=${n}&ingredient=${a}&title=${o}`;try{h.innerHTML="",M();const u=await(await fetch(r)).json();localStorage.setItem("totalPage",u.totalPages?u.totalPages:1),localStorage.setItem("category",t);const g=u.results;I(g)}catch(d){console.log(d+"fetching chosen category recipes")}finally{R(),y(1,"category-list")}}function Tt(){const t=document.querySelectorAll(".category-btn");t.forEach(e=>{e.addEventListener("click",n=>{t.forEach(o=>{o.style.color=""}),n.target.style.color="var(--primary-color)";let a=n.target.innerText;localStorage.setItem("category",a),Ct(a)})})}function xt(t){t.forEach(e=>{kt.innerHTML+=`
            <li class="category-items"><button class="category-btn">${e}</button></li>
        `})}Bt.addEventListener("click",J);document.addEventListener("DOMContentLoaded",At);document.addEventListener("DOMContentLoaded",()=>{H(),Mt()});async function Mt(){try{const n=await(await fetch("https://tasty-treats-backend.p.goit.global/api/recipes/popular")).json(),a=document.querySelector("#popular-recipes-gallery");a.innerHTML="";const o=document.createDocumentFragment();n.forEach((r,d)=>{const u=document.createElement("li"),g=document.createElement("div");g.classList.add("recipe-container"),(d===2||d===3)&&g.classList.add("mobile-special");const p=document.createElement("img");p.src=r.preview||"default-image.jpg",p.alt=r.title||"Unknown Recipe",p.addEventListener("click",()=>{r._id?j(r._id):console.warn("Recipe ID is undefined!")});const i=document.createElement("div");i.classList.add("recipe-content");const m=document.createElement("h2");m.textContent=r.title||"Unknown Recipe",m.classList.add("recipe-content-title");const f=document.createElement("p");f.textContent=r.description||"No instructions provided",f.classList.add("recipe-content-instructions"),i.appendChild(m),i.appendChild(f),g.appendChild(p),g.appendChild(i),u.appendChild(g),o.appendChild(u)}),a.appendChild(o)}catch(t){console.error("Error fetching data:",t)}}const k=document.getElementById("scrollBtn");function Rt(){window.scrollY>300?k.style.display="block":k.style.display="none"}function Pt(t){t.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})}window.addEventListener("scroll",Rt);k.addEventListener("click",t=>Pt(t));
//# sourceMappingURL=index.js.map
