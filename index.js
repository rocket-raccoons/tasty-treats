import"./assets/footer-mascot-D6E9PBmA.js";import{i as x,d as K}from"./assets/vendor-BE0UidyL.js";const tt="/tasty-treats/assets/1-rDOwHOuF.webp",et="/tasty-treats/assets/2-4skkltV-.webp",at="/tasty-treats/assets/3-D0-ZMNjm.webp",nt="/tasty-treats/assets/4-BmSdx1zx.webp",ot="/tasty-treats/assets/5-BCo80kwS.webp",st="/tasty-treats/assets/5-BCo80kwS.webp",rt="/tasty-treats/assets/7-CqGGUQ5C.webp",it="/tasty-treats/assets/8-GawR9MF4.webp",ct="/tasty-treats/assets/8-GawR9MF4.webp",lt=[tt,et,at,nt,ot,st,rt,it,ct];document.addEventListener("DOMContentLoaded",function(){const t=document.querySelector(".slider"),e=document.querySelectorAll(".slide"),a=document.querySelectorAll(".lazy-image"),n=document.querySelector(".slider-indicators");let o=0,s=100;(()=>{const r=new IntersectionObserver((m,w)=>{m.forEach(H=>{if(H.isIntersecting){const S=H.target;S.src=lt[Number(S.dataset.src)-1],S.classList.remove("lazy-image"),w.unobserve(S)}})},{threshold:.1});a.forEach(m=>r.observe(m))})(),e.forEach((r,m)=>{const w=document.createElement("div");w.classList.add("indicator"),w.addEventListener("click",()=>h(m)),n.appendChild(w)});const g=document.querySelectorAll(".indicator");function c(){t.style.transform=`translateX(-${o*s}%)`,f()}function f(){g.forEach((r,m)=>{m===o?r.classList.add("active"):r.classList.remove("active")})}function h(r){o=r,c()}function v(){const r=t.offsetWidth;window.innerWidth>=1280?s=602/r*100:window.innerWidth>=768&&window.innerWidth<945?s=r/1/r*100:s=100,c()}v(),c(),window.addEventListener("resize",v),setInterval(()=>{o=(o+1)%e.length,c()},5e3)});function _(){const t=document.getElementById("recipeModal"),e=t.querySelector(".modal-close-button");e.onclick=k,window.onclick=function(a){a.target===t&&k()},document.addEventListener("keydown",function(a){a.key==="Escape"&&t.style.display==="block"&&k()})}async function N(t){const e=document.getElementById("recipeModal"),a=e.querySelector(".modal-content");a.innerHTML="<p>Loading recipe details...</p>",e.style.display="block";try{const o=await(await fetch(`https://tasty-treats-backend.p.goit.global/api/recipes/${t}`)).json();console.log(o.time),a.innerHTML=`
        <div class= "modal-heading">
          <div style="flex: 1;">
            <iframe class="modal-iframe" src="https://www.youtube.com/embed/${new URL(o.youtube).searchParams.get("v")}" frameborder="0" allowfullscreen></iframe>
          </div>
        <div class="modal-recipe-container" style="flex: 1;">
        <h2>${o.title}</h2>
        <div class="modal-rating-container">
        <div class="modal-star-container">
        <p class="rating star_rating">${"★".repeat(Math.round(o.rating))}☆</p>
        </div>
        <p class="cooking-time">${o.time} min</p>
        </div>
        <div class="modal-recipe-ingredients-container">
        <!-- <h3>Ingredients:</h3> -->
        <ul class="modal-recipe-ingredients">
          ${o.ingredients.map(s=>`<li class="modal-recipe-ingredients-item"><p class="ingredient">${s.name}</p><p class="ingredient-portion"> ${s.measure}</p></li>`).join("")}
        </ul>
        </div>
        </div>
        </div>
        <p>${o.instructions}</p>
        <div style="display: flex; gap: 20px; margin-top: 20px;">
          <button class="addToFavoriteButton">Add to Favorite</button>
          <button class="giveRatingButton">Give a Rating</button>
        </div>
        </div>
      `}catch(n){console.error("Error fetching recipe details:",n),a.innerHTML="<p>Error loading recipe details. Please try again.</p>"}}function k(){const t=document.getElementById("recipeModal");t.style.display="none"}const E="/tasty-treats/assets/sprite-C2B5z5w4.svg",dt="/tasty-treats/assets/nothing-BxBcHaW7.gif",B=document.getElementById("filter-form"),T=document.getElementById("time-options"),M=document.getElementById("area-options"),R=document.getElementById("ingredient-options"),gt=document.getElementById("time-trigger-text"),mt=document.getElementById("area-trigger-text"),ut=document.getElementById("ingredient-trigger-text"),L=document.getElementById("search"),I=document.getElementById("cancel-btn"),pt=document.getElementById("reset-filter-btn"),z=document.getElementById("loader"),C=document.querySelector(".pagination"),p=document.querySelector(".cards-list"),b=[];let j=[];async function yt(){try{const e=await(await fetch("https://tasty-treats-backend.p.goit.global/api/recipes?limit=9")).json();return $(e.results),e.totalPages}catch(t){return x.error({title:"",message:"Sorry! An error occured while fetching recipes. Please try again!",position:"topRight"}),console.error("API verisi alınırken hata oluştu:",t),"hata"}}function $(t){const e=localStorage.getItem("favArr")?JSON.parse(localStorage.getItem("favArr")):[];p.innerHTML="",t.length===0?(p.innerHTML=`
    <div class="no-results-container loader-container">
      <p class="no-results-text">Sorry! No results were found that match your filters.</p>
      <img class="no-results" src="${dt}"></img>
    </div>`,C.style.display="none"):(C.style.display="flex",t.forEach(a=>{const n=Math.round(a.rating),o=5-n,s=`
      <li class="cards-listing" style="background-image: url(${a.preview});">
      <button class="heard-button add-to-fav" data-category="${a.category}" data-id="${a._id}" aria-label="like-btn">
         <svg class="svg-heard add-to-fav" data-id="${a._id}" width="22px" height="22px">
            <use class="add-to-fav svguse" href="${E}#${e.includes(a._id)?"icon-heart-filled":"icon-heart"}"></use>
        </svg></button>

      <div class="card-content-container">
         <div class="text-container">
            <h3 class="card-title">${a.title}</h3>
              <p class="specification-text">${a.description}</p>
          </div>

          <div class="card-rating-container">
              <div class="rating-container">
                  <p class="rating-text">${a.rating.toFixed(1)}</p>
                  <div class="star-container">
                    ${`<svg class="card-star-svg">
                    <use href="${E}#icon-star"></use>
                      </svg>`.repeat(n)}

                    ${`<svg class="card-star-svg">
                    <use href="${E}#icon-emptystar"></use>
                    </svg>`.repeat(o)}
                  </div>    
                </div>
              
            <button class="recipe-button" data-id="${a._id}">See recipe</button>
        </div>      
      </li>
    `;p.insertAdjacentHTML("beforeend",s)}),W())}function W(){document.querySelectorAll(".recipe-button").forEach(e=>{e.addEventListener("click",function(){const a=this.getAttribute("data-id");N(a)})})}function ft(){localStorage.setItem("favArr",JSON.stringify(b)),localStorage.setItem("favArrCategory",JSON.stringify(j))&&JSON.stringify(j)}function ht(t){const e=t.target.closest(".heard-button");if(e){e.dataset.category;const a=e.dataset.id,n=e.querySelector(".svguse");b.includes(a)?(b.splice(b.indexOf(a),1),n.setAttribute("href",`${E}#icon-heart`)):(b.push(a),n.setAttribute("href",`${E}#icon-heart-filled`)),ft()}}p.addEventListener("click",t=>ht(t));document.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>{yt().then(()=>{W(),_()})},100);const t=localStorage.getItem("favArr");t&&b.push(...JSON.parse(t))});const G=document.getElementById("orderForm"),vt=document.querySelector(".order"),bt=document.querySelector(".close-button");vt.addEventListener("click",t=>Lt());bt.addEventListener("click",t=>U());G.addEventListener("submit",t=>{U()});function Lt(){document.getElementById("popupOverlay").style.display="block",G.reset()}function U(){document.getElementById("popupOverlay").style.display="none"}const wt="https://tasty-treats-backend.p.goit.global/api/areas",Et="https://tasty-treats-backend.p.goit.global/api/ingredients";async function It(){try{const t=await fetch(wt);if(!t.ok)throw new Error("Failed to fetch areas");const e=await t.json();F(e)}catch{F([{name:"Sorry no region to select"}])}}function F(t){t.forEach(e=>{const a=`<li data-area="${e.name}" data-name="area" class="option">${e.name}</li>`;M.insertAdjacentHTML("beforeend",a)})}async function St(){try{const t=await fetch(Et);if(!t.ok)throw new Error("Failed to fetch ingredients");const e=await t.json();D(e)}catch{D([{name:"Sorry no ingredients to select"}])}}function D(t){t.forEach(e=>{const a=`<li data-ingredient="${e._id}" data-name="ingredient" class="option">${e.name}</li>`;R.insertAdjacentHTML("beforeend",a)})}function $t(){for(let t=5;t<=120;t+=5){const e=`<li data-time="${t}" data-name="time" class="option">${t} min</li>`;T.insertAdjacentHTML("beforeend",e)}}function J(){localStorage.setItem("time",""),localStorage.setItem("area",""),localStorage.setItem("ingredient",""),localStorage.setItem("title",""),localStorage.setItem("totalPage",""),localStorage.setItem("category","")}document.addEventListener("DOMContentLoaded",()=>{It(),St(),$t(),J()});let i="https://tasty-treats-backend.p.goit.global/api/recipes?category=&page=1&limit=9";async function q(t){try{p.innerHTML="",P();const e=await fetch(t);if(!e.ok)throw new Error("An error occurred while fetching recipes");const a=await e.json();localStorage.setItem("totalPage",a.totalPages?a.totalPages:1),u(1,"form-read"),$(a.results)}catch(e){x.error({title:"",message:"Sorry! An error occurred while fetching recipes please try again!",position:"topRight"}),console.log(e.message)}finally{O()}}function kt(t,e){if(e.target.tagName!=="LI")return;const a=localStorage.getItem("category"),n=document.getElementById(`${t}-trigger-text`),o=document.getElementById(`${t}-options`),s=e.target.dataset[t];n.textContent=e.target.textContent,localStorage.setItem(`${t}`,s),i=i.includes(t)?i.replace(new RegExp(`${t}=[^&]*`),`${t}=${s}`):`${i}&${t}=${s}`,i=i.includes("category")?i.replace(/category=[^&]*/,`category=${a}`):`${i}&category=${a}`,o.classList.add("hidden-dropdown"),n.classList.add("trigger-active"),console.log(i),q(i)}const V=K(function(){L.value!==""?I.classList.remove("hidden"):I.classList.add("hidden");const t=localStorage.getItem("category"),e=localStorage.getItem("time"),a=localStorage.getItem("area"),n=localStorage.getItem("ingredient"),o=L.value.trim();i=`https://tasty-treats-backend.p.goit.global/api/recipes?category=${t}&page=1&limit=9&time=${e}&area=${a}&ingredient=${n}&title=${o}`,localStorage.setItem("title",L.value?o:""),q(i)},300);function Q(){i="https://tasty-treats-backend.p.goit.global/api/recipes?category=&page=1&limit=9",[gt,mt,ut].forEach(e=>{e.textContent="Select",e.classList.remove("trigger-active")}),L.value="",document.querySelectorAll(".category-btn").forEach(e=>{e.style.color=""}),I.classList.add("hidden"),J(),q(i)}function Bt(){L.value="",I.classList.add("hidden"),V()}function P(){z.classList.remove("hidden"),C.style.display="none"}function O(){z.classList.add("hidden")}function X(){[T,M,R].forEach(t=>t.classList.add("hidden-dropdown"))}function Ct(t){B&&!B.contains(t.target)&&X()}function At(t){let e=t.target.id;switch((t.target.tagName==="svg"||t.target.tagName==="SPAN")&&(e=t.target.parentElement.id),e){case"time-trigger":T.classList.toggle("hidden-dropdown");break;case"area-trigger":M.classList.toggle("hidden-dropdown");break;case"ingredient-trigger":R.classList.toggle("hidden-dropdown");break;default:if(t.target.tagName==="LI"){const a=t.target.dataset.name;kt(a,t)}else X()}}B.addEventListener("click",t=>At(t));L.addEventListener("input",V);I.addEventListener("click",Bt);pt.addEventListener("click",Q);window.addEventListener("click",t=>Ct(t));const xt=document.querySelector(".pagination"),Tt=document.querySelectorAll(".page-number"),Mt=document.getElementById("singleLeft"),Rt=document.getElementById("singleRight"),qt=document.getElementById("doubleLeft"),Pt=document.getElementById("doubleRight");let l=1,d=1,Y=null;async function Ot(){d=await jt(),Y=d,Z()}async function Ht(t){p.innerHTML="",P();try{const e=await fetch(t);if(!e.ok)throw new Error("An error occurred while fetching recipes");const a=await e.json();$(a.results)}catch{x.error({title:"",message:"Sorry! An error occurred while fetching recipes please try again!",position:"topRight"})}finally{O()}}async function jt(){try{return(await(await fetch("https://tasty-treats-backend.p.goit.global/api/recipes?limit=9")).json()).totalPages}catch(t){return console.error("API verisi alınırken hata oluştu:",t),1}}function Z(){let t=-1;l==d&&d!=1&&(t=-2),l!=d&&l==1&&(t=0),Tt.forEach((e,a)=>{const n=l+t+a;e.textContent=n,e.classList.toggle("active-page",n==l),e.style.display=n>0&&n<=d?"inline-block":"none"}),Mt.disabled=l==1,qt.disabled=l==1,Rt.disabled=l==d,Pt.disabled=l==d}function u(t,e){console.log("page : ",t),d=localStorage.getItem("totalPage")?Number(localStorage.getItem("totalPage")):Y,console.log("total page : ",d),t>=1&&t<=d&&(l=t,Z()),e=="page-number"&&Ft(t)}function Ft(t){const e=localStorage.getItem("time"),a=localStorage.getItem("category")?localStorage.getItem("category"):"",n=localStorage.getItem("area"),o=localStorage.getItem("ingredient"),s=localStorage.getItem("title");Ht(`https://tasty-treats-backend.p.goit.global/api/recipes?category=${a}&page=${t}&limit=9&time=${e}&area=${n}&ingredient=${o}&title=${s}`)}xt.addEventListener("click",t=>{t.target.classList.contains("page-number")?u(parseInt(t.target.textContent),"page-number"):t.target.id==="singleLeft"?u(l-1,"page-number"):t.target.id==="singleRight"?u(l+1,"page-number"):t.target.id==="doubleLeft"?u(1,"page-number"):t.target.id==="doubleRight"&&u(d,"page-number")});document.addEventListener("DOMContentLoaded",Ot);const Dt=document.querySelector(".category-items-list"),_t=document.querySelector(".categories-button");async function Nt(){const t="https://tasty-treats-backend.p.goit.global/api/categories";localStorage.setItem("category","");try{const n=(await(await fetch(t)).json()).map(o=>o.name);Gt(n),Wt()}catch(e){console.log(e+"fetching categories")}}async function zt(t){const e=localStorage.getItem("time"),a=localStorage.getItem("area"),n=localStorage.getItem("ingredient"),o=localStorage.getItem("title");console.log("boş",e,a,n);const s=`https://tasty-treats-backend.p.goit.global/api/recipes?category=${t}&page=1&limit=9&time=${e}&area=${a}&ingredient=${n}&title=${o}`;try{p.innerHTML="",P();const g=await(await fetch(s)).json();localStorage.setItem("totalPage",g.totalPages?g.totalPages:1),localStorage.setItem("category",t);const c=g.results;$(c)}catch(y){console.log(y+"fetching chosen category recipes")}finally{O(),u(1,"category-list")}}function Wt(){const t=document.querySelectorAll(".category-btn");t.forEach(e=>{e.addEventListener("click",a=>{t.forEach(o=>{o.style.color=""}),a.target.style.color="var(--primary-color)";let n=a.target.innerText;localStorage.setItem("category",n),zt(n)})})}function Gt(t){t.forEach(e=>{Dt.innerHTML+=`
            <li class="category-items"><button class="category-btn">${e}</button></li>
        `})}_t.addEventListener("click",Q);document.addEventListener("DOMContentLoaded",Nt);document.addEventListener("DOMContentLoaded",()=>{_(),Ut()});async function Ut(){try{const a=await(await fetch("https://tasty-treats-backend.p.goit.global/api/recipes/popular")).json(),n=document.querySelector("#popular-recipes-gallery");n.innerHTML="";const o=document.createDocumentFragment();a.forEach((s,y)=>{const g=document.createElement("li"),c=document.createElement("div");c.classList.add("recipe-container"),(y===2||y===3)&&c.classList.add("mobile-special");const f=document.createElement("img");f.src=s.preview||"default-image.jpg",f.alt=s.title||"Unknown Recipe",f.addEventListener("click",()=>{s._id?N(s._id):console.warn("Recipe ID is undefined!")});const h=document.createElement("div");h.classList.add("recipe-content");const v=document.createElement("h2");v.textContent=s.title||"Unknown Recipe",v.classList.add("recipe-content-title");const r=document.createElement("p");r.textContent=s.description||"No instructions provided",r.classList.add("recipe-content-instructions"),h.appendChild(v),h.appendChild(r),c.appendChild(f),c.appendChild(h),g.appendChild(c),o.appendChild(g)}),n.appendChild(o)}catch(t){console.error("Error fetching data:",t)}}const A=document.getElementById("scrollBtn");function Jt(){window.scrollY>300?A.style.display="block":A.style.display="none"}function Vt(t){t.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})}window.addEventListener("scroll",Jt);A.addEventListener("click",t=>Vt(t));
//# sourceMappingURL=index.js.map
