import{i as t,s as e,o as n}from"./assets/footer-CSjTeHrM.js";const a="/tasty-treats/assets/raccoon-sad-fav-CduDKH6i.png",r=document.getElementById("message-container");let o="All Categories",s=null;async function i(){const t=function(){const t=localStorage.getItem("favArr");return t?JSON.parse(t):[]}();try{return(await Promise.all(t.map((t=>async function(t){try{const e=await fetch(`https://tasty-treats-backend.p.goit.global/api/recipes/${t}`);if(!e.ok)throw new Error("Network response was not ok");return await e.json()}catch(e){return null}}(t))))).filter((t=>null!==t))}catch(e){return[]}}async function c(t=1){const e=await i();if(0===e.length){r.innerHTML=`\n        <div class="fav-message-container">\n            <img src="${a}" class="fav-raccoon">\n            <p class="fav-message">It appears that you haven't added any recipes to your favorites yet. To get started, you can add recipes that you like to your favorites for easier access in the future.</p>\n            <img src="${a}" class="fav-chefs-hat">\n        </div>\n        `;document.querySelector(".pagination").innerHTML=""}else{const a=[...new Set(e.map((t=>t.category)))];localStorage.setItem("favArrCategory",JSON.stringify(a)),u(),l(e,t),d(e.length,t),document.querySelectorAll(".recipe-button").forEach((t=>{t.addEventListener("click",(function(){const t=this.getAttribute("data-id");n(t)}))}))}}function l(t,n){const a=document.querySelector(".favorite-cards");a.innerHTML="";const r=12*(n-1),l=r+12;t.slice(r,l).forEach((t=>{const n=Math.round(t.rating),r=5-n,o=`\n        <li class="cards-listing" style="background-image: url(${t.preview});">\n            <button class="heard-button" data-category="${t.category}" data-id="${t._id}" aria-label="like-btn">\n                <svg class="svg-heard add-to-fav" data-id="${t._id}" width="22px" height="22px">\n                    <use href="${e}#icon-heart-filled"></use>\n                </svg>\n            </button>\n            <div class="card-content-container">\n                <div class="text-container">\n                    <h3 class="card-title">${t.title}</h3>\n                    <p class="specification-text">${t.description}</p>\n                </div>\n                <div class="card-rating-container">\n                    <div class="rating-container">\n                        <p class="rating-text">${t.rating.toFixed(1)}</p>\n                        <div class="star-container">\n                            ${`<svg class="card-star-svg">\n                            <use href="${e}#icon-star"></use>\n                            </svg>`.repeat(n)}\n                            ${`<svg class="card-star-svg">\n                            <use href="${e}#icon-emptystar"></use>\n                            </svg>`.repeat(r)}\n                        </div>    \n                    </div>\n                    <button class="recipe-button" data-id="${t._id}">See recipe</button>\n                </div>      \n            </div>\n        </li>\n        `;a.innerHTML+=o})),document.querySelectorAll(".heard-button").forEach((t=>{t.addEventListener("click",(async function(){const e=t.dataset.id,n=t.dataset.category,a=localStorage.getItem("favArr");let r=a?JSON.parse(a):[];if(r.includes(e)&&(r.splice(r.indexOf(e),1),localStorage.setItem("favArr",JSON.stringify(r))),0===(await i()).filter((t=>t.category===n)).length){const t=localStorage.getItem("favArrCategory");let e=t?JSON.parse(t):[];e.includes(n)&&(e.splice(e.indexOf(n),1),localStorage.setItem("favArrCategory",JSON.stringify(e))),o="All Categories",s&&(s.style.backgroundColor="",s.style.color="",s.style.border="");const a=document.querySelector(".fav-categories-list button:first-child");a.style.backgroundColor="var(--primary-color)",a.style.color="#fff",a.style.border="1px solid var(--primary-color)",s=a}u(),"All Categories"===o?c():g(o)}))})),function(){const t=document.querySelectorAll(".heard-button");let e=[];t.forEach((t=>{e.includes(t.dataset.category)||e.push(t.dataset.category)})),e.sort()}()}function d(t,e,n="All Categories"){const a=Math.ceil(t/12),r=document.querySelector(".pagination");r.innerHTML=`\n        <div class="left-arrow-container">\n            <button id="doubleLeft" class="pagination-btn left-end" ${1===e?"disabled":""}>\n                &laquo;\n            </button>\n            <button id="singleLeft" class="pagination-btn left-one" ${1===e?"disabled":""}>\n                &lsaquo;\n            </button>\n        </div>\n        <div class="number-container">\n        </div>\n        <div class="right-arrow-container">\n            <button id="singleRight" class="right-one pagination-btn" ${e===a?"disabled":""}>\n                &rsaquo;\n            </button>\n            <button id="doubleRight" class="right-end pagination-btn" ${e===a?"disabled":""}>\n                &raquo;\n            </button>\n        </div>\n    `;const o=r.querySelector(".number-container");for(let s=1;s<=a;s++){const t=document.createElement("button");t.textContent=s,t.classList.add("pagination-btn","page-number"),s===e&&t.classList.add("active-page"),t.addEventListener("click",(()=>{"All Categories"===n?c(s):g(n,s)})),o.appendChild(t)}r.querySelector("#doubleLeft").addEventListener("click",(()=>{"All Categories"===n?c(1):g(n,1)})),r.querySelector("#singleLeft").addEventListener("click",(()=>{"All Categories"===n?c(e-1):g(n,e-1)})),r.querySelector("#singleRight").addEventListener("click",(()=>{"All Categories"===n?c(e+1):g(n,e+1)})),r.querySelector("#doubleRight").addEventListener("click",(()=>{"All Categories"===n?c(a):g(n,a)}))}function u(){const t=document.querySelector(".fav-categories-list"),e=localStorage.getItem("favArrCategory");let n=e?JSON.parse(e):[];t.innerHTML="";const a=document.createElement("li"),r=document.createElement("button");r.textContent="All Categories",r.classList.add("category-button"),r.addEventListener("click",(()=>{o="All Categories",s&&(s.style.backgroundColor="",s.style.color="",s.style.border=""),r.style.backgroundColor="var(--primary-color)",r.style.color="#fff",r.style.border="1px solid var(--primary-color)",s=r,c()})),a.appendChild(r),t.appendChild(a),n.forEach((e=>{const n=document.createElement("li"),a=document.createElement("button");a.textContent=e,a.classList.add("category-button"),a.addEventListener("click",(()=>{o=e,s&&(s.style.backgroundColor="",s.style.color="",s.style.border=""),a.style.backgroundColor="var(--primary-color)",a.style.color="#fff",a.style.border="1px solid var(--primary-color)",s=a,g(e)})),n.appendChild(a),t.appendChild(n)}))}async function g(t,e=1){const n=(await i()).filter((e=>e.category===t));l(n,e),d(n.length,e,t)}document.addEventListener("DOMContentLoaded",(()=>c().then((()=>{t()}))));
//# sourceMappingURL=favorites.js.map
